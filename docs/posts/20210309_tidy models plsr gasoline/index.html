<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>pRactice corner: Tidy Models - Regression</title>

<meta property="description" itemprop="description" content="Predicting numerical outcomes using partial least squares on gasoline dataset"/>

<link rel="canonical" href="https://lruolin.github.io/myBlog/posts/20210309_tidy models plsr gasoline/"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-03-09"/>
<meta property="article:created" itemprop="dateCreated" content="2021-03-09"/>
<meta name="article:author" content="lruolin"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="pRactice corner: Tidy Models - Regression"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Predicting numerical outcomes using partial least squares on gasoline dataset"/>
<meta property="og:url" content="https://lruolin.github.io/myBlog/posts/20210309_tidy models plsr gasoline/"/>
<meta property="og:image" content="https://lruolin.github.io/myBlog/posts/20210309_tidy models plsr gasoline/Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-3-1.png"/>
<meta property="og:image:width" content="1248"/>
<meta property="og:image:height" content="768"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="pRactice corner"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="pRactice corner: Tidy Models - Regression"/>
<meta property="twitter:description" content="Predicting numerical outcomes using partial least squares on gasoline dataset"/>
<meta property="twitter:url" content="https://lruolin.github.io/myBlog/posts/20210309_tidy models plsr gasoline/"/>
<meta property="twitter:image" content="https://lruolin.github.io/myBlog/posts/20210309_tidy models plsr gasoline/Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-3-1.png"/>
<meta property="twitter:image:width" content="1248"/>
<meta property="twitter:image:height" content="768"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="pRactice corner: Tidy Models - Regression"/>
<meta name="citation_fulltext_html_url" content="https://lruolin.github.io/myBlog/posts/20210309_tidy models plsr gasoline/"/>
<meta name="citation_online_date" content="2021/03/09"/>
<meta name="citation_publication_date" content="2021/03/09"/>
<meta name="citation_author" content="lruolin"/>
<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["Tidy Models - Regression"]},{"type":"character","attributes":{},"value":["Predicting numerical outcomes using partial least squares on gasoline dataset"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["lruolin"]}]}]},{"type":"character","attributes":{},"value":["03-09-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"character","attributes":{},"value":["https://lruolin.github.io/myBlog/posts/20210309_tidy models plsr gasoline/"]},{"type":"character","attributes":{},"value":["https://lruolin.github.io/myBlog/posts/20210309_tidy models plsr gasoline/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/anchor-4.2.2/anchor.min.js","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/bowser-1.9.3/bowser.min.js","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/distill-2.2.21/template.v2.js","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-11-1.png","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-12-1.png","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-12-2.png","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-3-1.png","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-8-1.png","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/header-attrs-2.7/header-attrs.js","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/jquery-1.11.3/jquery.min.js","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/popper-2.6.0/popper.min.js","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/tippy-6.2.7/tippy-bundle.umd.min.js","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/tippy-6.2.7/tippy-light-border.css","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/tippy-6.2.7/tippy.css","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/tippy-6.2.7/tippy.umd.min.js","Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.7/header-attrs.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Tidy Models - Regression","description":"Predicting numerical outcomes using partial least squares on gasoline dataset","authors":[{"author":"lruolin","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-03-09T00:00:00.000+00:00","citationText":"lruolin, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">pRactice corner</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="../../usefullinks.html">Useful Links</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Tidy Models - Regression</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Predicting numerical outcomes using partial least squares on gasoline dataset</p></p>
</div>

<div class="d-byline">
  lruolin  
  
<br/>03-09-2021
</div>

<div class="d-article">
<h1 id="overview">Overview</h1>
<p>The partial least square (PLS) regression method may be used to predict one or more numerical Y outcome variable when the X variables are highly correlated. In the chemistry field, it is very useful for relating spectra to chemical properties.</p>
<p>The problem with using ordinary least square linear regression for such datasets is that when X variables are highly correlated, it is difficult to interpret coefficients of different X meaningfully, since they are all correlated.</p>
<p>PLS technique is also useful when the number of samples is lesser than the number of variables. It maximises the <strong>covariance</strong> of <strong>both</strong> X and Y to calculate scores (how much a particular object contributes to a latent variable) and loadings (variable coefficients used to define a component). For principal component regression (PCR), only X variables are taken into account. If the variability of X is not related to variability of Y, then PCR will have difficulty identifying a predictive relationship, when one might exist. It helps to uncover latent structures in the highly correlated X variables, so as to predict Y.</p>
<p>In a way, PLS is a supervised dimension reduction. It finds components that maximally summarise the variation of the predictors while simultaneiously requiring these components to have maximum correlation with the response.</p>
<p>The workflow below is for predicting one Y variable, using multiple X variables, on the gasoline NIR dataset. The outcome variable of interest is the octane number.</p>
<h1 id="general-workflow">General workflow:</h1>
<ol type="1">
<li>Exploratory data analysis: Check if there are missing values, correlation of variables, identify the pre-processing steps required. How many variables are there? How are they distributed? Is it suitable for PLS?</li>
</ol>
<p>The data may also be visualized before modelling.</p>
<ol start="2" type="1">
<li><p>Split the dataset into training and testing dataset. The training dataset is used to build and tune the models, and the testing dataset is used to evaluate the model. Define a 10-fold cross validation dataset, from the training dataset. Resampling is useful if the sample size is small, to have a better bias-variance tradeoff (minimise over-fitting of model) for better predictive ability.</p></li>
<li><p>Preprocess the training dataset. Data would have to be imputed if there are missing values, and also normalised since PLS is using variance to understand dissimilarity in the X variables.</p></li>
<li><p>Train the model using the training dataset. In this case, the pls model is used. For PLS model, there is one tuning parameter, which is the number of components. The tune package will be used for tuning, and the data will be the 10-fold cross validation dataset.</p></li>
<li><p>Assess the training model using root mean square error (RMSE) and mean absolute error (MAE), as well as r-sq for accuracy.</p></li>
<li><p>Determine which variables are important in the model</p></li>
<li><p>Predict new data</p></li>
</ol>
<h1 id="packages-required">Packages required</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/trinker/pacman'>pacman</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/pacman/man/p_load.html'>p_load</a></span><span class='op'>(</span><span class='va'>modeldata</span>, <span class='va'>pls</span>, <span class='va'>tidyverse</span>, <span class='va'>tidymodels</span>, <span class='va'>corrplot</span>, 
       <span class='va'>skimr</span>, <span class='va'>plsmod</span>, <span class='va'>ggthemes</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h1 id="import-data">Import data</h1>
<p>This dataset is from the pls package, and has octane number (Y outcome variable), as well as NIR spectra of 60 gasoline samples.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>gasoline</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h1 id="visualize">Visualize</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>data_plot</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>gasoline</span>, <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/class.html'>unclass</a></span><span class='op'>(</span><span class='va'>gasoline</span><span class='op'>$</span><span class='va'>NIR</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>NIR</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>as_tibble</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>rowid_to_column</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>janitor</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>pivot_longer</span><span class='op'>(</span>cols <span class='op'>=</span> <span class='fu'>starts_with</span><span class='op'>(</span><span class='st'>"x"</span><span class='op'>)</span>,
               names_to <span class='op'>=</span> <span class='st'>"wavelength"</span>,
               values_to <span class='op'>=</span> <span class='st'>"reflectance"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>wavelength_number <span class='op'>=</span> <span class='fu'>parse_number</span><span class='op'>(</span><span class='va'>wavelength</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>data_plot</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>wavelength_number</span>, y <span class='op'>=</span> <span class='va'>reflectance</span>, col <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>rowid</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>y <span class='op'>=</span> <span class='st'>"log(1/R)"</span>,
       x <span class='op'>=</span> <span class='st'>"nm"</span>,
       title <span class='op'>=</span> <span class='st'>"Plot of NIR spectra for 60 gasoline samples"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>coord_cartesian</span><span class='op'>(</span>xlim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>900</span>, <span class='fl'>1800</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_classic</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-3-1.png" width="624" /></p>
</div>
<h1 id="modelling">Modelling</h1>
<p>To use the dataset for modelling using the tidymodels framework, convert the data into a tidy tibble structure. The pls package requires that the data be provided as a matrix format, but for the tidymodels framework, the data should be in a tibble format for ease in creating plots and modelling.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gasoline_tidy</span> <span class='op'>&lt;-</span>  <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>gasoline</span>, <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/class.html'>unclass</a></span><span class='op'>(</span><span class='va'>gasoline</span><span class='op'>$</span><span class='va'>NIR</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>NIR</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>as_tibble</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>janitor</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='op'>)</span> 

<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>gasoline_tidy</span><span class='op'>)</span> <span class='co'># 60 rows, 402 columns</span>
</code></pre>
</div>
<pre><code>Rows: 60
Columns: 402
$ octane   &lt;dbl&gt; 85.30, 85.25, 88.45, 83.40, 87.90, 85.50, 88.90, 88…
$ x900_nm  &lt;dbl&gt; -0.050193, -0.044227, -0.046867, -0.046705, -0.0508…
$ x902_nm  &lt;dbl&gt; -0.045903, -0.039602, -0.041260, -0.042240, -0.0451…
$ x904_nm  &lt;dbl&gt; -0.042187, -0.035673, -0.036979, -0.038561, -0.0410…
$ x906_nm  &lt;dbl&gt; -0.037177, -0.030911, -0.031458, -0.034513, -0.0363…
$ x908_nm  &lt;dbl&gt; -0.033348, -0.026675, -0.026520, -0.030206, -0.0327…
$ x910_nm  &lt;dbl&gt; -0.031207, -0.023871, -0.023346, -0.027680, -0.0314…
$ x912_nm  &lt;dbl&gt; -0.030036, -0.022571, -0.021392, -0.026042, -0.0314…
$ x914_nm  &lt;dbl&gt; -0.031298, -0.025410, -0.024993, -0.028280, -0.0346…
$ x916_nm  &lt;dbl&gt; -0.034217, -0.028960, -0.029309, -0.030920, -0.0377…
$ x918_nm  &lt;dbl&gt; -0.036012, -0.032740, -0.033920, -0.034012, -0.0407…
$ x920_nm  &lt;dbl&gt; -0.039792, -0.036683, -0.038539, -0.037082, -0.0440…
$ x922_nm  &lt;dbl&gt; -0.043037, -0.040169, -0.042571, -0.040444, -0.0473…
$ x924_nm  &lt;dbl&gt; -0.047313, -0.044899, -0.047511, -0.044858, -0.0514…
$ x926_nm  &lt;dbl&gt; -0.048103, -0.046266, -0.048487, -0.046544, -0.0520…
$ x928_nm  &lt;dbl&gt; -0.050627, -0.048627, -0.050455, -0.048978, -0.0540…
$ x930_nm  &lt;dbl&gt; -0.053830, -0.052014, -0.053913, -0.052483, -0.0571…
$ x932_nm  &lt;dbl&gt; -0.054604, -0.053635, -0.055195, -0.054078, -0.0583…
$ x934_nm  &lt;dbl&gt; -0.056676, -0.055454, -0.056713, -0.055723, -0.0599…
$ x936_nm  &lt;dbl&gt; -0.058428, -0.056777, -0.057447, -0.056999, -0.0606…
$ x938_nm  &lt;dbl&gt; -0.060644, -0.059331, -0.059620, -0.059409, -0.0628…
$ x940_nm  &lt;dbl&gt; -0.061712, -0.060518, -0.060656, -0.060543, -0.0637…
$ x942_nm  &lt;dbl&gt; -0.063148, -0.062084, -0.061767, -0.061868, -0.0650…
$ x944_nm  &lt;dbl&gt; -0.064480, -0.063331, -0.062859, -0.062899, -0.0657…
$ x946_nm  &lt;dbl&gt; -0.065987, -0.065059, -0.064668, -0.064401, -0.0672…
$ x948_nm  &lt;dbl&gt; -0.066894, -0.065536, -0.065566, -0.064814, -0.0679…
$ x950_nm  &lt;dbl&gt; -0.068201, -0.066877, -0.066890, -0.065989, -0.0692…
$ x952_nm  &lt;dbl&gt; -0.069434, -0.067899, -0.068397, -0.067180, -0.0707…
$ x954_nm  &lt;dbl&gt; -0.069594, -0.067662, -0.068439, -0.066987, -0.0707…
$ x956_nm  &lt;dbl&gt; -0.071336, -0.069050, -0.070171, -0.068829, -0.0724…
$ x958_nm  &lt;dbl&gt; -0.071208, -0.068497, -0.070077, -0.069063, -0.0722…
$ x960_nm  &lt;dbl&gt; -0.071454, -0.068434, -0.070639, -0.069995, -0.0726…
$ x962_nm  &lt;dbl&gt; -0.071469, -0.067953, -0.070578, -0.070687, -0.0726…
$ x964_nm  &lt;dbl&gt; -0.071631, -0.067061, -0.070137, -0.070725, -0.0722…
$ x966_nm  &lt;dbl&gt; -0.070886, -0.066073, -0.069803, -0.070661, -0.0718…
$ x968_nm  &lt;dbl&gt; -0.071010, -0.065564, -0.069738, -0.071043, -0.0718…
$ x970_nm  &lt;dbl&gt; -0.070609, -0.065335, -0.070031, -0.071324, -0.0718…
$ x972_nm  &lt;dbl&gt; -0.070464, -0.064051, -0.069496, -0.070894, -0.0714…
$ x974_nm  &lt;dbl&gt; -0.070433, -0.063666, -0.069789, -0.071157, -0.0717…
$ x976_nm  &lt;dbl&gt; -0.069957, -0.062513, -0.069002, -0.070798, -0.0711…
$ x978_nm  &lt;dbl&gt; -0.070208, -0.061955, -0.069288, -0.071120, -0.0713…
$ x980_nm  &lt;dbl&gt; -0.070523, -0.060906, -0.069398, -0.071266, -0.0715…
$ x982_nm  &lt;dbl&gt; -0.070252, -0.059413, -0.068613, -0.070540, -0.0707…
$ x984_nm  &lt;dbl&gt; -0.069360, -0.058242, -0.067675, -0.069737, -0.0698…
$ x986_nm  &lt;dbl&gt; -0.068338, -0.056855, -0.066685, -0.068637, -0.0687…
$ x988_nm  &lt;dbl&gt; -0.066991, -0.055982, -0.065196, -0.067211, -0.0673…
$ x990_nm  &lt;dbl&gt; -0.065362, -0.055107, -0.063317, -0.065586, -0.0655…
$ x992_nm  &lt;dbl&gt; -0.063971, -0.054763, -0.061604, -0.064064, -0.0641…
$ x994_nm  &lt;dbl&gt; -0.062210, -0.054189, -0.059695, -0.062089, -0.0624…
$ x996_nm  &lt;dbl&gt; -0.060678, -0.054361, -0.058403, -0.060639, -0.0612…
$ x998_nm  &lt;dbl&gt; -0.059275, -0.054014, -0.056868, -0.059018, -0.0598…
$ x1000_nm &lt;dbl&gt; -0.059126, -0.054822, -0.056419, -0.058185, -0.0595…
$ x1002_nm &lt;dbl&gt; -0.058903, -0.055303, -0.056021, -0.057415, -0.0592…
$ x1004_nm &lt;dbl&gt; -0.058488, -0.055101, -0.055192, -0.056311, -0.0583…
$ x1006_nm &lt;dbl&gt; -0.057291, -0.054473, -0.053844, -0.054969, -0.0570…
$ x1008_nm &lt;dbl&gt; -0.055408, -0.053119, -0.051961, -0.052664, -0.0552…
$ x1010_nm &lt;dbl&gt; -0.053862, -0.051626, -0.050363, -0.050925, -0.0537…
$ x1012_nm &lt;dbl&gt; -0.051421, -0.048967, -0.047896, -0.048186, -0.0516…
$ x1014_nm &lt;dbl&gt; -0.050485, -0.047722, -0.046456, -0.046844, -0.0508…
$ x1016_nm &lt;dbl&gt; -0.048349, -0.045717, -0.044870, -0.045207, -0.0492…
$ x1018_nm &lt;dbl&gt; -0.047586, -0.044365, -0.044068, -0.044741, -0.0484…
$ x1020_nm &lt;dbl&gt; -0.046898, -0.043336, -0.043379, -0.044397, -0.0481…
$ x1022_nm &lt;dbl&gt; -0.047726, -0.043581, -0.044227, -0.044697, -0.0487…
$ x1024_nm &lt;dbl&gt; -0.048686, -0.044036, -0.045469, -0.045614, -0.0498…
$ x1026_nm &lt;dbl&gt; -0.049626, -0.044856, -0.046493, -0.046452, -0.0506…
$ x1028_nm &lt;dbl&gt; -0.050714, -0.046041, -0.048213, -0.047669, -0.0520…
$ x1030_nm &lt;dbl&gt; -0.051541, -0.046858, -0.049097, -0.048569, -0.0528…
$ x1032_nm &lt;dbl&gt; -0.052976, -0.048652, -0.050967, -0.050055, -0.0546…
$ x1034_nm &lt;dbl&gt; -0.054019, -0.049853, -0.052127, -0.051178, -0.0555…
$ x1036_nm &lt;dbl&gt; -0.055507, -0.051562, -0.053886, -0.052781, -0.0569…
$ x1038_nm &lt;dbl&gt; -0.056386, -0.052526, -0.054432, -0.053594, -0.0576…
$ x1040_nm &lt;dbl&gt; -0.056779, -0.053738, -0.055172, -0.054460, -0.0580…
$ x1042_nm &lt;dbl&gt; -0.056876, -0.054069, -0.055257, -0.054997, -0.0582…
$ x1044_nm &lt;dbl&gt; -0.056439, -0.053925, -0.054866, -0.055201, -0.0578…
$ x1046_nm &lt;dbl&gt; -0.056708, -0.054880, -0.055286, -0.055934, -0.0585…
$ x1048_nm &lt;dbl&gt; -0.056432, -0.054857, -0.055256, -0.055994, -0.0583…
$ x1050_nm &lt;dbl&gt; -0.056974, -0.055695, -0.055922, -0.056841, -0.0590…
$ x1052_nm &lt;dbl&gt; -0.057091, -0.055656, -0.055649, -0.056687, -0.0586…
$ x1054_nm &lt;dbl&gt; -0.057541, -0.056352, -0.056044, -0.057192, -0.0590…
$ x1056_nm &lt;dbl&gt; -0.057746, -0.056501, -0.056164, -0.057521, -0.0589…
$ x1058_nm &lt;dbl&gt; -0.058387, -0.057275, -0.056653, -0.058097, -0.0592…
$ x1060_nm &lt;dbl&gt; -0.058997, -0.057927, -0.057349, -0.058708, -0.0597…
$ x1062_nm &lt;dbl&gt; -0.058975, -0.058044, -0.057620, -0.058940, -0.0601…
$ x1064_nm &lt;dbl&gt; -0.059624, -0.058311, -0.058109, -0.059339, -0.0607…
$ x1066_nm &lt;dbl&gt; -0.059737, -0.058253, -0.057978, -0.059002, -0.0607…
$ x1068_nm &lt;dbl&gt; -0.060552, -0.058841, -0.058726, -0.059353, -0.0617…
$ x1070_nm &lt;dbl&gt; -0.060416, -0.058138, -0.058442, -0.058568, -0.0615…
$ x1072_nm &lt;dbl&gt; -0.061099, -0.058603, -0.058857, -0.058309, -0.0623…
$ x1074_nm &lt;dbl&gt; -0.060784, -0.058309, -0.058779, -0.057284, -0.0621…
$ x1076_nm &lt;dbl&gt; -0.061292, -0.058444, -0.059351, -0.057273, -0.0625…
$ x1078_nm &lt;dbl&gt; -0.061811, -0.058993, -0.060286, -0.057433, -0.0631…
$ x1080_nm &lt;dbl&gt; -0.061852, -0.059121, -0.060681, -0.057911, -0.0634…
$ x1082_nm &lt;dbl&gt; -0.062380, -0.059445, -0.061533, -0.059303, -0.0640…
$ x1084_nm &lt;dbl&gt; -0.062816, -0.059475, -0.061879, -0.060453, -0.0642…
$ x1086_nm &lt;dbl&gt; -0.063620, -0.060274, -0.062840, -0.062042, -0.0651…
$ x1088_nm &lt;dbl&gt; -0.063730, -0.060256, -0.063150, -0.062812, -0.0654…
$ x1090_nm &lt;dbl&gt; -0.064291, -0.060515, -0.063667, -0.063620, -0.0658…
$ x1092_nm &lt;dbl&gt; -0.064209, -0.060839, -0.063744, -0.063369, -0.0657…
$ x1094_nm &lt;dbl&gt; -0.064162, -0.060784, -0.063969, -0.063106, -0.0659…
$ x1096_nm &lt;dbl&gt; -0.063681, -0.060401, -0.063588, -0.062210, -0.0654…
$ x1098_nm &lt;dbl&gt; -0.062757, -0.059631, -0.062893, -0.061071, -0.0646…
$ x1100_nm &lt;dbl&gt; -0.061833, -0.058887, -0.062346, -0.060476, -0.0637…
$ x1102_nm &lt;dbl&gt; -0.060653, -0.057861, -0.060954, -0.059613, -0.0623…
$ x1104_nm &lt;dbl&gt; -0.059872, -0.057174, -0.060277, -0.059053, -0.0614…
$ x1106_nm &lt;dbl&gt; -0.058221, -0.055943, -0.058933, -0.057879, -0.0596…
$ x1108_nm &lt;dbl&gt; -0.057000, -0.054586, -0.057725, -0.056993, -0.0583…
$ x1110_nm &lt;dbl&gt; -0.054962, -0.052730, -0.056403, -0.055674, -0.0566…
$ x1112_nm &lt;dbl&gt; -0.052726, -0.050650, -0.054639, -0.053633, -0.0544…
$ x1114_nm &lt;dbl&gt; -0.050188, -0.047988, -0.052604, -0.051368, -0.0521…
$ x1116_nm &lt;dbl&gt; -0.047313, -0.045184, -0.050002, -0.048753, -0.0490…
$ x1118_nm &lt;dbl&gt; -0.044383, -0.042775, -0.047952, -0.046565, -0.0458…
$ x1120_nm &lt;dbl&gt; -0.040658, -0.039567, -0.044838, -0.043878, -0.0415…
$ x1122_nm &lt;dbl&gt; -0.036981, -0.036483, -0.041595, -0.041106, -0.0366…
$ x1124_nm &lt;dbl&gt; -0.030389, -0.031762, -0.036552, -0.036145, -0.0297…
$ x1126_nm &lt;dbl&gt; -0.022454, -0.026061, -0.030222, -0.029643, -0.0205…
$ x1128_nm &lt;dbl&gt; -0.011760, -0.017961, -0.021030, -0.020369, -0.0080…
$ x1130_nm &lt;dbl&gt; 0.000941, -0.008352, -0.010311, -0.009442, 0.006771…
$ x1132_nm &lt;dbl&gt; 0.018067, 0.004104, 0.003633, 0.005123, 0.026072, 0…
$ x1134_nm &lt;dbl&gt; 0.039563, 0.020129, 0.021227, 0.023279, 0.050595, 0…
$ x1136_nm &lt;dbl&gt; 0.065490, 0.040174, 0.043017, 0.045674, 0.080282, 0…
$ x1138_nm &lt;dbl&gt; 0.093330, 0.061190, 0.065780, 0.069009, 0.111046, 0…
$ x1140_nm &lt;dbl&gt; 0.119886, 0.082808, 0.088740, 0.092430, 0.140255, 0…
$ x1142_nm &lt;dbl&gt; 0.143335, 0.103309, 0.110123, 0.113654, 0.162922, 0…
$ x1144_nm &lt;dbl&gt; 0.161862, 0.121239, 0.128801, 0.131457, 0.178850, 0…
$ x1146_nm &lt;dbl&gt; 0.178692, 0.139799, 0.147827, 0.148927, 0.192453, 0…
$ x1148_nm &lt;dbl&gt; 0.190440, 0.154684, 0.163220, 0.162499, 0.200921, 0…
$ x1150_nm &lt;dbl&gt; 0.194380, 0.163895, 0.171823, 0.169830, 0.200736, 0…
$ x1152_nm &lt;dbl&gt; 0.187846, 0.163702, 0.170286, 0.168042, 0.189637, 0…
$ x1154_nm &lt;dbl&gt; 0.173436, 0.155861, 0.160042, 0.159366, 0.170796, 0…
$ x1156_nm &lt;dbl&gt; 0.158487, 0.146830, 0.147558, 0.149124, 0.152340, 0…
$ x1158_nm &lt;dbl&gt; 0.146299, 0.139954, 0.137904, 0.141988, 0.138688, 0…
$ x1160_nm &lt;dbl&gt; 0.143034, 0.140520, 0.136222, 0.142149, 0.133949, 0…
$ x1162_nm &lt;dbl&gt; 0.146884, 0.147677, 0.142161, 0.148574, 0.137171, 0…
$ x1164_nm &lt;dbl&gt; 0.156093, 0.159739, 0.153683, 0.159490, 0.146438, 0…
$ x1166_nm &lt;dbl&gt; 0.167857, 0.174511, 0.168846, 0.173304, 0.159196, 0…
$ x1168_nm &lt;dbl&gt; 0.179468, 0.189393, 0.184297, 0.186928, 0.172705, 0…
$ x1170_nm &lt;dbl&gt; 0.192422, 0.204829, 0.201057, 0.201306, 0.187194, 0…
$ x1172_nm &lt;dbl&gt; 0.205774, 0.222001, 0.219339, 0.217320, 0.202939, 0…
$ x1174_nm &lt;dbl&gt; 0.222009, 0.240784, 0.238474, 0.235025, 0.221091, 0…
$ x1176_nm &lt;dbl&gt; 0.238851, 0.259705, 0.257398, 0.253360, 0.239527, 0…
$ x1178_nm &lt;dbl&gt; 0.257624, 0.279918, 0.277868, 0.273140, 0.260289, 0…
$ x1180_nm &lt;dbl&gt; 0.282144, 0.305844, 0.303828, 0.298527, 0.286929, 0…
$ x1182_nm &lt;dbl&gt; 0.316637, 0.342649, 0.340386, 0.334143, 0.324194, 0…
$ x1184_nm &lt;dbl&gt; 0.360689, 0.390617, 0.388889, 0.379790, 0.370256, 0…
$ x1186_nm &lt;dbl&gt; 0.410005, 0.445219, 0.444171, 0.431122, 0.418339, 0…
$ x1188_nm &lt;dbl&gt; 0.454409, 0.497316, 0.497294, 0.478623, 0.458811, 0…
$ x1190_nm &lt;dbl&gt; 0.485965, 0.535230, 0.535431, 0.512772, 0.480722, 0…
$ x1192_nm &lt;dbl&gt; 0.497682, 0.552865, 0.552290, 0.529281, 0.483581, 0…
$ x1194_nm &lt;dbl&gt; 0.489535, 0.545858, 0.541118, 0.523347, 0.465097, 0…
$ x1196_nm &lt;dbl&gt; 0.466098, 0.516133, 0.504049, 0.497873, 0.432696, 0…
$ x1198_nm &lt;dbl&gt; 0.432583, 0.474097, 0.453667, 0.462310, 0.392652, 0…
$ x1200_nm &lt;dbl&gt; 0.394805, 0.429533, 0.400454, 0.423781, 0.351462, 0…
$ x1202_nm &lt;dbl&gt; 0.359732, 0.388781, 0.353163, 0.387603, 0.315084, 0…
$ x1204_nm &lt;dbl&gt; 0.331966, 0.357836, 0.318767, 0.359001, 0.288042, 0…
$ x1206_nm &lt;dbl&gt; 0.309186, 0.334257, 0.293785, 0.336412, 0.267363, 0…
$ x1208_nm &lt;dbl&gt; 0.292567, 0.316834, 0.276645, 0.319126, 0.251579, 0…
$ x1210_nm &lt;dbl&gt; 0.275393, 0.300208, 0.260872, 0.301999, 0.235251, 0…
$ x1212_nm &lt;dbl&gt; 0.255452, 0.280041, 0.242538, 0.282530, 0.216596, 0…
$ x1214_nm &lt;dbl&gt; 0.235247, 0.259029, 0.224122, 0.261341, 0.198460, 0…
$ x1216_nm &lt;dbl&gt; 0.213967, 0.237029, 0.206128, 0.239522, 0.181406, 0…
$ x1218_nm &lt;dbl&gt; 0.192011, 0.215364, 0.188049, 0.218119, 0.165114, 0…
$ x1220_nm &lt;dbl&gt; 0.170424, 0.192902, 0.169174, 0.195463, 0.148187, 0…
$ x1222_nm &lt;dbl&gt; 0.150943, 0.171982, 0.152376, 0.174744, 0.133288, 0…
$ x1224_nm &lt;dbl&gt; 0.132428, 0.151256, 0.136216, 0.154083, 0.118446, 0…
$ x1226_nm &lt;dbl&gt; 0.115921, 0.133448, 0.121756, 0.135921, 0.105215, 0…
$ x1228_nm &lt;dbl&gt; 0.099535, 0.115749, 0.106574, 0.118325, 0.090738, 0…
$ x1230_nm &lt;dbl&gt; 0.084481, 0.099265, 0.090796, 0.101493, 0.076775, 0…
$ x1232_nm &lt;dbl&gt; 0.071254, 0.084244, 0.076286, 0.086168, 0.063483, 0…
$ x1234_nm &lt;dbl&gt; 0.058049, 0.070886, 0.062592, 0.072287, 0.050650, 0…
$ x1236_nm &lt;dbl&gt; 0.047446, 0.060095, 0.051793, 0.061218, 0.040134, 0…
$ x1238_nm &lt;dbl&gt; 0.036880, 0.049378, 0.041423, 0.050044, 0.030024, 0…
$ x1240_nm &lt;dbl&gt; 0.029082, 0.040630, 0.033518, 0.040826, 0.021975, 0…
$ x1242_nm &lt;dbl&gt; 0.021789, 0.032988, 0.026652, 0.032597, 0.015352, 0…
$ x1244_nm &lt;dbl&gt; 0.016038, 0.026985, 0.021066, 0.026030, 0.010021, 0…
$ x1246_nm &lt;dbl&gt; 0.011251, 0.021400, 0.016164, 0.020097, 0.005572, 0…
$ x1248_nm &lt;dbl&gt; 0.006186, 0.016041, 0.011051, 0.014526, 0.001400, 0…
$ x1250_nm &lt;dbl&gt; 0.003116, 0.012094, 0.007728, 0.010441, -0.001737, …
$ x1252_nm &lt;dbl&gt; -0.000998, 0.007511, 0.003719, 0.005578, -0.005442,…
$ x1254_nm &lt;dbl&gt; -0.004703, 0.003694, -0.000068, 0.001684, -0.008756…
$ x1256_nm &lt;dbl&gt; -0.009270, -0.001214, -0.004753, -0.002925, -0.0128…
$ x1258_nm &lt;dbl&gt; -0.012907, -0.005412, -0.008519, -0.007083, -0.0162…
$ x1260_nm &lt;dbl&gt; -0.017234, -0.010057, -0.012552, -0.011555, -0.0201…
$ x1262_nm &lt;dbl&gt; -0.020832, -0.014084, -0.016265, -0.015370, -0.0235…
$ x1264_nm &lt;dbl&gt; -0.024051, -0.017764, -0.019766, -0.018619, -0.0270…
$ x1266_nm &lt;dbl&gt; -0.027297, -0.021488, -0.023338, -0.021719, -0.0301…
$ x1268_nm &lt;dbl&gt; -0.029792, -0.024172, -0.025883, -0.023654, -0.0323…
$ x1270_nm &lt;dbl&gt; -0.032400, -0.027224, -0.029186, -0.025991, -0.0353…
$ x1272_nm &lt;dbl&gt; -0.033746, -0.029156, -0.031037, -0.027169, -0.0369…
$ x1274_nm &lt;dbl&gt; -0.035721, -0.031021, -0.033466, -0.028784, -0.0383…
$ x1276_nm &lt;dbl&gt; -0.036701, -0.032030, -0.034469, -0.029554, -0.0394…
$ x1278_nm &lt;dbl&gt; -0.037363, -0.032565, -0.035675, -0.030701, -0.0404…
$ x1280_nm &lt;dbl&gt; -0.037377, -0.032049, -0.035766, -0.031122, -0.0405…
$ x1282_nm &lt;dbl&gt; -0.037489, -0.031394, -0.036086, -0.031775, -0.0405…
$ x1284_nm &lt;dbl&gt; -0.037695, -0.031097, -0.036513, -0.032641, -0.0406…
$ x1286_nm &lt;dbl&gt; -0.036906, -0.029836, -0.036003, -0.032724, -0.0402…
$ x1288_nm &lt;dbl&gt; -0.037094, -0.029678, -0.036171, -0.033748, -0.0403…
$ x1290_nm &lt;dbl&gt; -0.036752, -0.028968, -0.035911, -0.034132, -0.0398…
$ x1292_nm &lt;dbl&gt; -0.037211, -0.029269, -0.036362, -0.035013, -0.0398…
$ x1294_nm &lt;dbl&gt; -0.037308, -0.029262, -0.036318, -0.035620, -0.0397…
$ x1296_nm &lt;dbl&gt; -0.037673, -0.029877, -0.036997, -0.036407, -0.0400…
$ x1298_nm &lt;dbl&gt; -0.037877, -0.030030, -0.037092, -0.036595, -0.0400…
$ x1300_nm &lt;dbl&gt; -0.038212, -0.030565, -0.037218, -0.036742, -0.0400…
$ x1302_nm &lt;dbl&gt; -0.038426, -0.031404, -0.037411, -0.037076, -0.0401…
$ x1304_nm &lt;dbl&gt; -0.038534, -0.032320, -0.037429, -0.037230, -0.0403…
$ x1306_nm &lt;dbl&gt; -0.039103, -0.033693, -0.038010, -0.037877, -0.0411…
$ x1308_nm &lt;dbl&gt; -0.038933, -0.034155, -0.037523, -0.037530, -0.0406…
$ x1310_nm &lt;dbl&gt; -0.039611, -0.035496, -0.038127, -0.038428, -0.0415…
$ x1312_nm &lt;dbl&gt; -0.039168, -0.035629, -0.037544, -0.037948, -0.0407…
$ x1314_nm &lt;dbl&gt; -0.038598, -0.035932, -0.037255, -0.037560, -0.0402…
$ x1316_nm &lt;dbl&gt; -0.037733, -0.035289, -0.036148, -0.036566, -0.0390…
$ x1318_nm &lt;dbl&gt; -0.037027, -0.034887, -0.035291, -0.035762, -0.0379…
$ x1320_nm &lt;dbl&gt; -0.035891, -0.034467, -0.034674, -0.035156, -0.0374…
$ x1322_nm &lt;dbl&gt; -0.034290, -0.033427, -0.033358, -0.033697, -0.0361…
$ x1324_nm &lt;dbl&gt; -0.033224, -0.032634, -0.032758, -0.032653, -0.0353…
$ x1326_nm &lt;dbl&gt; -0.031475, -0.030815, -0.031228, -0.030570, -0.0334…
$ x1328_nm &lt;dbl&gt; -0.030071, -0.029493, -0.030097, -0.028914, -0.0324…
$ x1330_nm &lt;dbl&gt; -0.028086, -0.027298, -0.027881, -0.026203, -0.0302…
$ x1332_nm &lt;dbl&gt; -0.026779, -0.026081, -0.026697, -0.024685, -0.0290…
$ x1334_nm &lt;dbl&gt; -0.024450, -0.024199, -0.024809, -0.022470, -0.0267…
$ x1336_nm &lt;dbl&gt; -0.022709, -0.022546, -0.022950, -0.020930, -0.0245…
$ x1338_nm &lt;dbl&gt; -0.020088, -0.020154, -0.020248, -0.018910, -0.0215…
$ x1340_nm &lt;dbl&gt; -0.016814, -0.017032, -0.016845, -0.016121, -0.0179…
$ x1342_nm &lt;dbl&gt; -0.013638, -0.013717, -0.013423, -0.013279, -0.0139…
$ x1344_nm &lt;dbl&gt; -0.008755, -0.008264, -0.007559, -0.008334, -0.0080…
$ x1346_nm &lt;dbl&gt; -0.003402, -0.002064, -0.000991, -0.003372, -0.0018…
$ x1348_nm &lt;dbl&gt; 0.004585, 0.007304, 0.008786, 0.004753, 0.007269, 0…
$ x1350_nm &lt;dbl&gt; 0.015708, 0.020121, 0.022739, 0.016161, 0.019779, 0…
$ x1352_nm &lt;dbl&gt; 0.032342, 0.039083, 0.043209, 0.033429, 0.038201, 0…
$ x1354_nm &lt;dbl&gt; 0.055075, 0.064193, 0.069797, 0.056411, 0.062477, 0…
$ x1356_nm &lt;dbl&gt; 0.083261, 0.095086, 0.102595, 0.085082, 0.092206, 0…
$ x1358_nm &lt;dbl&gt; 0.114275, 0.128027, 0.137954, 0.116397, 0.123556, 0…
$ x1360_nm &lt;dbl&gt; 0.142234, 0.158800, 0.169100, 0.145471, 0.151961, 0…
$ x1362_nm &lt;dbl&gt; 0.165117, 0.183265, 0.194530, 0.168918, 0.174343, 0…
$ x1364_nm &lt;dbl&gt; 0.181014, 0.201249, 0.212629, 0.185935, 0.189944, 0…
$ x1366_nm &lt;dbl&gt; 0.194140, 0.216701, 0.227677, 0.200819, 0.202222, 0…
$ x1368_nm &lt;dbl&gt; 0.207728, 0.232922, 0.243204, 0.215868, 0.215936, 0…
$ x1370_nm &lt;dbl&gt; 0.225084, 0.252380, 0.262941, 0.234213, 0.233155, 0…
$ x1372_nm &lt;dbl&gt; 0.245205, 0.274944, 0.285764, 0.255771, 0.254445, 0…
$ x1374_nm &lt;dbl&gt; 0.267331, 0.298853, 0.309733, 0.279190, 0.277749, 0…
$ x1376_nm &lt;dbl&gt; 0.290558, 0.322715, 0.333065, 0.303732, 0.301495, 0…
$ x1378_nm &lt;dbl&gt; 0.311237, 0.342958, 0.352530, 0.325323, 0.320695, 0…
$ x1380_nm &lt;dbl&gt; 0.328961, 0.360426, 0.369372, 0.344871, 0.336187, 0…
$ x1382_nm &lt;dbl&gt; 0.341901, 0.372804, 0.380216, 0.359555, 0.345160, 0…
$ x1384_nm &lt;dbl&gt; 0.350544, 0.381960, 0.387849, 0.370893, 0.350677, 0…
$ x1386_nm &lt;dbl&gt; 0.357751, 0.389191, 0.394677, 0.378461, 0.355522, 0…
$ x1388_nm &lt;dbl&gt; 0.364172, 0.397112, 0.402078, 0.386247, 0.362320, 0…
$ x1390_nm &lt;dbl&gt; 0.370471, 0.403062, 0.408582, 0.392268, 0.368313, 0…
$ x1392_nm &lt;dbl&gt; 0.373154, 0.406006, 0.410932, 0.393815, 0.370052, 0…
$ x1394_nm &lt;dbl&gt; 0.368176, 0.401295, 0.406170, 0.388471, 0.365085, 0…
$ x1396_nm &lt;dbl&gt; 0.356007, 0.389064, 0.393839, 0.376881, 0.352979, 0…
$ x1398_nm &lt;dbl&gt; 0.341120, 0.373591, 0.376215, 0.360814, 0.337215, 0…
$ x1400_nm &lt;dbl&gt; 0.325587, 0.356204, 0.357096, 0.344653, 0.321339, 0…
$ x1402_nm &lt;dbl&gt; 0.313571, 0.342050, 0.340687, 0.331744, 0.308459, 0…
$ x1404_nm &lt;dbl&gt; 0.306847, 0.332780, 0.329190, 0.323812, 0.299508, 0…
$ x1406_nm &lt;dbl&gt; 0.305310, 0.329005, 0.322999, 0.321500, 0.295653, 0…
$ x1408_nm &lt;dbl&gt; 0.304471, 0.328951, 0.321164, 0.323119, 0.295204, 0…
$ x1410_nm &lt;dbl&gt; 0.304125, 0.328051, 0.319110, 0.322928, 0.292860, 0…
$ x1412_nm &lt;dbl&gt; 0.298698, 0.322452, 0.311924, 0.317972, 0.286862, 0…
$ x1414_nm &lt;dbl&gt; 0.285589, 0.308979, 0.298671, 0.305534, 0.274217, 0…
$ x1416_nm &lt;dbl&gt; 0.267933, 0.290704, 0.280373, 0.288311, 0.257335, 0…
$ x1418_nm &lt;dbl&gt; 0.247573, 0.269241, 0.258819, 0.267978, 0.237130, 0…
$ x1420_nm &lt;dbl&gt; 0.229774, 0.249374, 0.238800, 0.248524, 0.219594, 0…
$ x1422_nm &lt;dbl&gt; 0.215690, 0.233860, 0.222677, 0.232934, 0.205760, 0…
$ x1424_nm &lt;dbl&gt; 0.207192, 0.224821, 0.213798, 0.223277, 0.197859, 0…
$ x1426_nm &lt;dbl&gt; 0.202051, 0.220504, 0.209824, 0.217777, 0.195243, 0…
$ x1428_nm &lt;dbl&gt; 0.201819, 0.220685, 0.210649, 0.216610, 0.196015, 0…
$ x1430_nm &lt;dbl&gt; 0.202353, 0.222163, 0.212908, 0.216723, 0.197585, 0…
$ x1432_nm &lt;dbl&gt; 0.201612, 0.222347, 0.214331, 0.216083, 0.198133, 0…
$ x1434_nm &lt;dbl&gt; 0.199291, 0.221434, 0.214048, 0.214255, 0.196885, 0…
$ x1436_nm &lt;dbl&gt; 0.193770, 0.215752, 0.209266, 0.208305, 0.190623, 0…
$ x1438_nm &lt;dbl&gt; 0.186669, 0.209041, 0.202558, 0.201097, 0.184152, 0…
$ x1440_nm &lt;dbl&gt; 0.178426, 0.200297, 0.193675, 0.192070, 0.175524, 0…
$ x1442_nm &lt;dbl&gt; 0.171231, 0.192172, 0.185359, 0.183795, 0.167989, 0…
$ x1444_nm &lt;dbl&gt; 0.164144, 0.183974, 0.176963, 0.176042, 0.159801, 0…
$ x1446_nm &lt;dbl&gt; 0.157259, 0.175816, 0.169181, 0.168643, 0.152625, 0…
$ x1448_nm &lt;dbl&gt; 0.149194, 0.167254, 0.159964, 0.160181, 0.144600, 0…
$ x1450_nm &lt;dbl&gt; 0.139789, 0.156358, 0.149142, 0.150664, 0.134160, 0…
$ x1452_nm &lt;dbl&gt; 0.130173, 0.146486, 0.139082, 0.141494, 0.125008, 0…
$ x1454_nm &lt;dbl&gt; 0.120745, 0.137275, 0.129739, 0.133234, 0.115873, 0…
$ x1456_nm &lt;dbl&gt; 0.113733, 0.130180, 0.122022, 0.126515, 0.109185, 0…
$ x1458_nm &lt;dbl&gt; 0.107519, 0.123365, 0.116297, 0.120700, 0.103171, 0…
$ x1460_nm &lt;dbl&gt; 0.103765, 0.119438, 0.113173, 0.117645, 0.100027, 0…
$ x1462_nm &lt;dbl&gt; 0.101175, 0.116286, 0.110954, 0.115052, 0.098121, 0…
$ x1464_nm &lt;dbl&gt; 0.100106, 0.114482, 0.110095, 0.113629, 0.097745, 0…
$ x1466_nm &lt;dbl&gt; 0.099068, 0.112444, 0.109058, 0.112397, 0.097652, 0…
$ x1468_nm &lt;dbl&gt; 0.097315, 0.108714, 0.106665, 0.108961, 0.096193, 0…
$ x1470_nm &lt;dbl&gt; 0.095724, 0.106003, 0.104405, 0.106436, 0.095738, 0…
$ x1472_nm &lt;dbl&gt; 0.093093, 0.102389, 0.100941, 0.102798, 0.093557, 0…
$ x1474_nm &lt;dbl&gt; 0.090002, 0.098235, 0.097474, 0.098874, 0.090709, 0…
$ x1476_nm &lt;dbl&gt; 0.086612, 0.093959, 0.093497, 0.094944, 0.087039, 0…
$ x1478_nm &lt;dbl&gt; 0.084922, 0.091774, 0.091673, 0.092621, 0.085000, 0…
$ x1480_nm &lt;dbl&gt; 0.080780, 0.087636, 0.087493, 0.088422, 0.080375, 0…
$ x1482_nm &lt;dbl&gt; 0.077849, 0.084646, 0.084593, 0.084868, 0.077113, 0…
$ x1484_nm &lt;dbl&gt; 0.074536, 0.082097, 0.081474, 0.081632, 0.073986, 0…
$ x1486_nm &lt;dbl&gt; 0.070910, 0.079089, 0.078340, 0.078056, 0.069980, 0…
$ x1488_nm &lt;dbl&gt; 0.068700, 0.077735, 0.076682, 0.076356, 0.067515, 0…
$ x1490_nm &lt;dbl&gt; 0.064584, 0.074444, 0.073916, 0.072892, 0.064092, 0…
$ x1492_nm &lt;dbl&gt; 0.061726, 0.071813, 0.071351, 0.069921, 0.060768, 0…
$ x1494_nm &lt;dbl&gt; 0.057395, 0.068586, 0.068287, 0.066060, 0.057105, 0…
$ x1496_nm &lt;dbl&gt; 0.053704, 0.065580, 0.065568, 0.062555, 0.054163, 0…
$ x1498_nm &lt;dbl&gt; 0.049329, 0.061501, 0.061216, 0.057895, 0.050508, 0…
$ x1500_nm &lt;dbl&gt; 0.044695, 0.056740, 0.055821, 0.052995, 0.045830, 0…
$ x1502_nm &lt;dbl&gt; 0.039937, 0.051068, 0.049529, 0.047908, 0.040213, 0…
$ x1504_nm &lt;dbl&gt; 0.034641, 0.045104, 0.043150, 0.042637, 0.034258, 0…
$ x1506_nm &lt;dbl&gt; 0.030164, 0.040192, 0.037184, 0.038187, 0.029202, 0…
$ x1508_nm &lt;dbl&gt; 0.024898, 0.034145, 0.030828, 0.032880, 0.023555, 0…
$ x1510_nm &lt;dbl&gt; 0.021588, 0.029970, 0.026308, 0.029345, 0.019996, 0…
$ x1512_nm &lt;dbl&gt; 0.017102, 0.024131, 0.020805, 0.024026, 0.015186, 0…
$ x1514_nm &lt;dbl&gt; 0.014860, 0.020670, 0.016907, 0.020904, 0.012201, 0…
$ x1516_nm &lt;dbl&gt; 0.010854, 0.016931, 0.013194, 0.017431, 0.008836, 0…
$ x1518_nm &lt;dbl&gt; 0.008205, 0.013083, 0.009759, 0.014136, 0.005561, 0…
$ x1520_nm &lt;dbl&gt; 0.005869, 0.010199, 0.007271, 0.011749, 0.003463, 0…
$ x1522_nm &lt;dbl&gt; 0.003920, 0.007926, 0.004796, 0.009634, 0.001051, 0…
$ x1524_nm &lt;dbl&gt; 0.002107, 0.005733, 0.002720, 0.007699, -0.001164, …
$ x1526_nm &lt;dbl&gt; -0.000203, 0.002833, 0.000243, 0.005545, -0.003490,…
$ x1528_nm &lt;dbl&gt; -0.001072, 0.001596, -0.001196, 0.004693, -0.004459…
$ x1530_nm &lt;dbl&gt; -0.003325, -0.000928, -0.003965, 0.002553, -0.00740…
$ x1532_nm &lt;dbl&gt; -0.004707, -0.002545, -0.005704, 0.001494, -0.00901…
$ x1534_nm &lt;dbl&gt; -0.006635, -0.003656, -0.007156, -0.000102, -0.0101…
$ x1536_nm &lt;dbl&gt; -0.008403, -0.006217, -0.009860, -0.003056, -0.0127…
$ x1538_nm &lt;dbl&gt; -0.009317, -0.006885, -0.010959, -0.004391, -0.0138…
$ x1540_nm &lt;dbl&gt; -0.011351, -0.008307, -0.012194, -0.006868, -0.0151…
$ x1542_nm &lt;dbl&gt; -0.012280, -0.009142, -0.013605, -0.008665, -0.0158…
$ x1544_nm &lt;dbl&gt; -0.013474, -0.010409, -0.014564, -0.010355, -0.0171…
$ x1546_nm &lt;dbl&gt; -0.014453, -0.010983, -0.015313, -0.011261, -0.0175…
$ x1548_nm &lt;dbl&gt; -0.015262, -0.012033, -0.015723, -0.011896, -0.0181…
$ x1550_nm &lt;dbl&gt; -0.015588, -0.012020, -0.015263, -0.011357, -0.0179…
$ x1552_nm &lt;dbl&gt; -0.016349, -0.013442, -0.016537, -0.012562, -0.0191…
$ x1554_nm &lt;dbl&gt; -0.016028, -0.012709, -0.015581, -0.011408, -0.0183…
$ x1556_nm &lt;dbl&gt; -0.016209, -0.011563, -0.014147, -0.010164, -0.0173…
$ x1558_nm &lt;dbl&gt; -0.015985, -0.010432, -0.013280, -0.009194, -0.0168…
$ x1560_nm &lt;dbl&gt; -0.015483, -0.010091, -0.013291, -0.009642, -0.0167…
$ x1562_nm &lt;dbl&gt; -0.014216, -0.007960, -0.012268, -0.008700, -0.0155…
$ x1564_nm &lt;dbl&gt; -0.013790, -0.006697, -0.011176, -0.007899, -0.0145…
$ x1566_nm &lt;dbl&gt; -0.013844, -0.005367, -0.010897, -0.006986, -0.0146…
$ x1568_nm &lt;dbl&gt; -0.011773, -0.003432, -0.009383, -0.005475, -0.0131…
$ x1570_nm &lt;dbl&gt; -0.010432, -0.002665, -0.008983, -0.004838, -0.0130…
$ x1572_nm &lt;dbl&gt; -0.009606, -0.001307, -0.007542, -0.003785, -0.0112…
$ x1574_nm &lt;dbl&gt; -0.008209, -0.000406, -0.005716, -0.002646, -0.0101…
$ x1576_nm &lt;dbl&gt; -0.006732, 0.001300, -0.003888, -0.001373, -0.00784…
$ x1578_nm &lt;dbl&gt; -0.004573, 0.003107, -0.001115, 0.000559, -0.005406…
$ x1580_nm &lt;dbl&gt; -0.003433, 0.003075, 0.000176, 0.001422, -0.004259,…
$ x1582_nm &lt;dbl&gt; -0.001200, 0.004513, 0.002464, 0.003357, -0.002039,…
$ x1584_nm &lt;dbl&gt; -0.000066, 0.005336, 0.003951, 0.005481, -0.000655,…
$ x1586_nm &lt;dbl&gt; 0.002759, 0.008496, 0.008541, 0.010048, 0.003930, 0…
$ x1588_nm &lt;dbl&gt; 0.004036, 0.009262, 0.009676, 0.011528, 0.004579, 0…
$ x1590_nm &lt;dbl&gt; 0.006620, 0.010982, 0.012153, 0.014357, 0.007207, 0…
$ x1592_nm &lt;dbl&gt; 0.008709, 0.012330, 0.013639, 0.015642, 0.008612, 0…
$ x1594_nm &lt;dbl&gt; 0.011810, 0.015301, 0.016898, 0.018304, 0.012129, 0…
$ x1596_nm &lt;dbl&gt; 0.014426, 0.018270, 0.019847, 0.020612, 0.015541, 0…
$ x1598_nm &lt;dbl&gt; 0.017254, 0.020912, 0.022470, 0.022399, 0.018535, 0…
$ x1600_nm &lt;dbl&gt; 0.020633, 0.024617, 0.026069, 0.025038, 0.022522, 0…
$ x1602_nm &lt;dbl&gt; 0.025032, 0.028188, 0.029714, 0.027860, 0.026739, 0…
$ x1604_nm &lt;dbl&gt; 0.029496, 0.033321, 0.034281, 0.032481, 0.032223, 0…
$ x1606_nm &lt;dbl&gt; 0.034242, 0.037755, 0.039133, 0.036772, 0.037103, 0…
$ x1608_nm &lt;dbl&gt; 0.039735, 0.043515, 0.045228, 0.042282, 0.043411, 0…
$ x1610_nm &lt;dbl&gt; 0.046803, 0.050530, 0.051833, 0.049100, 0.051336, 0…
$ x1612_nm &lt;dbl&gt; 0.053743, 0.058033, 0.059036, 0.056030, 0.059517, 0…
$ x1614_nm &lt;dbl&gt; 0.062788, 0.067009, 0.068655, 0.065351, 0.069594, 0…
$ x1616_nm &lt;dbl&gt; 0.073531, 0.077781, 0.079319, 0.075811, 0.081145, 0…
$ x1618_nm &lt;dbl&gt; 0.087246, 0.091191, 0.092339, 0.089083, 0.096240, 0…
$ x1620_nm &lt;dbl&gt; 0.104000, 0.106815, 0.107952, 0.105323, 0.112862, 0…
$ x1622_nm &lt;dbl&gt; 0.124210, 0.123946, 0.123435, 0.123006, 0.131164, 0…
$ x1624_nm &lt;dbl&gt; 0.147924, 0.146013, 0.143631, 0.145753, 0.153401, 0…
$ x1626_nm &lt;dbl&gt; 0.175024, 0.171884, 0.166498, 0.173142, 0.178326, 0…
$ x1628_nm &lt;dbl&gt; 0.202711, 0.197074, 0.188171, 0.200956, 0.202094, 0…
$ x1630_nm &lt;dbl&gt; 0.232547, 0.224837, 0.210848, 0.231804, 0.228229, 0…
$ x1632_nm &lt;dbl&gt; 0.259828, 0.250088, 0.232041, 0.259687, 0.252492, 0…
$ x1634_nm &lt;dbl&gt; 0.282117, 0.270191, 0.249246, 0.281929, 0.273077, 0…
$ x1636_nm &lt;dbl&gt; 0.299937, 0.284011, 0.261166, 0.297769, 0.290969, 0…
$ x1638_nm &lt;dbl&gt; 0.313416, 0.290728, 0.271317, 0.308358, 0.307760, 0…
$ x1640_nm &lt;dbl&gt; 0.322870, 0.294182, 0.276957, 0.311430, 0.321736, 0…
$ x1642_nm &lt;dbl&gt; 0.327217, 0.293247, 0.279662, 0.311149, 0.331647, 0…
$ x1644_nm &lt;dbl&gt; 0.331907, 0.289916, 0.280366, 0.308663, 0.337756, 0…
$ x1646_nm &lt;dbl&gt; 0.336522, 0.291554, 0.284626, 0.308939, 0.344823, 0…
$ x1648_nm &lt;dbl&gt; 0.341847, 0.293929, 0.289691, 0.311825, 0.352189, 0…
$ x1650_nm &lt;dbl&gt; 0.350585, 0.301816, 0.297987, 0.319857, 0.362563, 0…
$ x1652_nm &lt;dbl&gt; 0.368032, 0.316670, 0.312909, 0.335700, 0.379202, 0…
$ x1654_nm &lt;dbl&gt; 0.393494, 0.336533, 0.333932, 0.355742, 0.404428, 0…
$ x1656_nm &lt;dbl&gt; 0.427370, 0.363209, 0.362284, 0.384754, 0.441534, 0…
$ x1658_nm &lt;dbl&gt; 0.472357, 0.399271, 0.400352, 0.424769, 0.494011, 0…
$ x1660_nm &lt;dbl&gt; 0.528721, 0.443964, 0.445686, 0.472003, 0.557655, 0…
$ x1662_nm &lt;dbl&gt; 0.593168, 0.499024, 0.504338, 0.531050, 0.635493, 0…
$ x1664_nm &lt;dbl&gt; 0.666647, 0.559683, 0.567039, 0.596606, 0.721107, 0…
$ x1666_nm &lt;dbl&gt; 0.743945, 0.624577, 0.635874, 0.662997, 0.803044, 0…
$ x1668_nm &lt;dbl&gt; 0.833972, 0.697450, 0.711690, 0.744126, 0.893778, 0…
$ x1670_nm &lt;dbl&gt; 0.909368, 0.770433, 0.792939, 0.817398, 0.968985, 0…
$ x1672_nm &lt;dbl&gt; 0.985332, 0.848769, 0.872021, 0.895422, 1.050312, 0…
$ x1674_nm &lt;dbl&gt; 1.051159, 0.916590, 0.938915, 0.959761, 1.104573, 1…
$ x1676_nm &lt;dbl&gt; 1.107395, 0.975048, 1.004690, 1.021595, 1.152964, 1…
$ x1678_nm &lt;dbl&gt; 1.158488, 1.036499, 1.067934, 1.082497, 1.192131, 1…
$ x1680_nm &lt;dbl&gt; 1.174795, 1.085067, 1.108813, 1.117447, 1.219254, 1…
$ x1682_nm &lt;dbl&gt; 1.198461, 1.128877, 1.147964, 1.160089, 1.252712, 1…
$ x1684_nm &lt;dbl&gt; 1.224243, 1.148342, 1.167798, 1.169350, 1.238013, 1…
$ x1686_nm &lt;dbl&gt; 1.242645, 1.189116, 1.198287, 1.201066, 1.259616, 1…
$ x1688_nm &lt;dbl&gt; 1.250789, 1.223242, 1.237383, 1.233299, 1.273713, 1…
$ x1690_nm &lt;dbl&gt; 1.246626, 1.253306, 1.260979, 1.262966, 1.296524, 1…
$ x1692_nm &lt;dbl&gt; 1.250985, 1.282889, 1.276677, 1.272709, 1.299507, 1…
$ x1694_nm &lt;dbl&gt; 1.264189, 1.215065, 1.218871, 1.211068, 1.226448, 1…
$ x1696_nm &lt;dbl&gt; 1.244678, 1.225211, 1.223132, 1.215044, 1.230718, 1…
$ x1698_nm &lt;dbl&gt; 1.245913, 1.227985, 1.230321, 1.232655, 1.232864, 1…
$ x1700_nm &lt;dbl&gt; 1.221135, 1.198851, 1.208742, 1.206696, 1.202926, 1…</code></pre>
</div>
<h1 id="eda">EDA</h1>
<p>Check for missing values using purrr::map()</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>gasoline_tidy</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map</a></span><span class='op'>(</span><span class='va'>is.na</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>map_df</span><span class='op'>(</span><span class='va'>sum</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>tidy</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>column</span>, <span class='va'>mean</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>as_tibble</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>mean</span><span class='op'>&gt;</span><span class='fl'>0</span><span class='op'>)</span> <span class='co'># no missing values</span>
</code></pre>
</div>
<pre><code># A tibble: 0 x 2
# … with 2 variables: column &lt;chr&gt;, mean &lt;dbl&gt;</code></pre>
</div>
<p>For other datasets, one should check the correlation again, but in this case, as this is a NIR dataset, I will not do this step.</p>
<h1 id="split-dataset">Split dataset</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># initial split</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>20210308</span><span class='op'>)</span>
<span class='va'>gasoline_split</span> <span class='op'>&lt;-</span> <span class='fu'>initial_split</span><span class='op'>(</span><span class='va'>gasoline_tidy</span>, prop <span class='op'>=</span> <span class='fl'>0.8</span><span class='op'>)</span>

<span class='va'>gasoline_training</span> <span class='op'>&lt;-</span> <span class='va'>gasoline_split</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>training</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>gasoline_testing</span> <span class='op'>&lt;-</span> <span class='va'>gasoline_split</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>testing</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>gasoline_cv</span> <span class='op'>&lt;-</span> <span class='fu'>vfold_cv</span><span class='op'>(</span><span class='va'>gasoline_training</span><span class='op'>)</span> <span class='co'># to tune number of components later</span>
</code></pre>
</div>
</div>
<h1 id="modelling-1">Modelling</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># recipe</span>

<span class='va'>gasoline_reciped</span> <span class='op'>&lt;-</span> <span class='fu'>recipe</span><span class='op'>(</span><span class='va'>octane</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>gasoline_training</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>update_role</span><span class='op'>(</span><span class='va'>octane</span>, new_role <span class='op'>=</span> <span class='st'>"outcome"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>step_normalize</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>gasoline_reciped</span>
</code></pre>
</div>
<pre><code>Data Recipe

Inputs:

      role #variables
   outcome          1
 predictor        401

Operations:

Centering and scaling for all_predictors()</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># fit model</span>

<span class='va'>pls_model</span> <span class='op'>&lt;-</span> <span class='fu'>plsmod</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/plsmod/man/pls.html'>pls</a></span><span class='op'>(</span>num_comp <span class='op'>=</span> <span class='fu'>tune</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>set_mode</span><span class='op'>(</span><span class='st'>"regression"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>set_engine</span><span class='op'>(</span><span class='st'>"mixOmics"</span><span class='op'>)</span>

<span class='co'># put into workflow</span>

<span class='va'>pls_workflow</span> <span class='op'>&lt;-</span> <span class='fu'>workflow</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>add_recipe</span><span class='op'>(</span><span class='va'>gasoline_reciped</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>add_model</span><span class='op'>(</span><span class='va'>pls_model</span><span class='op'>)</span>

<span class='co'># create grid</span>
<span class='va'>pls_grid</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/expand.grid.html'>expand.grid</a></span><span class='op'>(</span>num_comp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span> <span class='op'>(</span>from <span class='op'>=</span> <span class='fl'>1</span>, to <span class='op'>=</span> <span class='fl'>20</span>, by <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>tuned_pls_results</span> <span class='op'>&lt;-</span> <span class='va'>pls_workflow</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>tune_grid</span><span class='op'>(</span>resamples <span class='op'>=</span> <span class='va'>gasoline_cv</span>,
            grid <span class='op'>=</span> <span class='va'>pls_grid</span>,
            metrics <span class='op'>=</span> <span class='fu'>metric_set</span><span class='op'>(</span><span class='va'>mae</span>, <span class='va'>rmse</span>, <span class='va'>rsq</span><span class='op'>)</span><span class='op'>)</span>

<span class='op'>(</span><span class='va'>model_results</span> <span class='op'>&lt;-</span> <span class='va'>tuned_pls_results</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>collect_metrics</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 60 x 7
   num_comp .metric .estimator  mean     n std_err .config            
      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;              
 1        1 mae     standard   1.15     10 0.122   Preprocessor1_Mode…
 2        1 rmse    standard   1.29     10 0.137   Preprocessor1_Mode…
 3        1 rsq     standard   0.371    10 0.104   Preprocessor1_Mode…
 4        2 mae     standard   0.573    10 0.0745  Preprocessor1_Mode…
 5        2 rmse    standard   0.691    10 0.0876  Preprocessor1_Mode…
 6        2 rsq     standard   0.716    10 0.0874  Preprocessor1_Mode…
 7        3 mae     standard   0.212    10 0.0280  Preprocessor1_Mode…
 8        3 rmse    standard   0.259    10 0.0289  Preprocessor1_Mode…
 9        3 rsq     standard   0.972    10 0.00967 Preprocessor1_Mode…
10        4 mae     standard   0.187    10 0.0177  Preprocessor1_Mode…
# … with 50 more rows</code></pre>
</div>
<p>Visualize:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># plot</span>

<span class='va'>tuned_pls_results</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>collect_metrics</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>num_comp</span>, <span class='va'>mean</span>, col <span class='op'>=</span> <span class='va'>.metric</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_x_continuous</span><span class='op'>(</span>n.breaks <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>"Number of components"</span>,
       y <span class='op'>=</span> <span class='st'>"Indicator"</span>,
       title <span class='op'>=</span> <span class='st'>"Plot of MAE, RMSE and R-SQ vs number of components for TRAINING dataset, with 10-fold repeated cross validation"</span>,
       subtitle <span class='op'>=</span> <span class='st'>"Optimal number of components is 3"</span><span class='op'>)</span> <span class='op'>+</span>
 <span class='fu'>facet_grid</span><span class='op'>(</span><span class='va'>.metric</span> <span class='op'>~</span><span class='va'>.</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_few</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"none"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-8-1.png" width="624" /></p>
</div>
<p>Check against numerical values:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># check against numerical values</span>
<span class='va'>tuned_best</span> <span class='op'>&lt;-</span> <span class='va'>tuned_pls_results</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select_best</span><span class='op'>(</span><span class='st'>"rsq"</span><span class='op'>)</span> 

<span class='va'>tuned_best</span>
</code></pre>
</div>
<pre><code># A tibble: 1 x 2
  num_comp .config              
     &lt;dbl&gt; &lt;chr&gt;                
1        4 Preprocessor1_Model04</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># check with other indicators</span>
<span class='va'>tuned_pls_results</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select_best</span><span class='op'>(</span><span class='st'>"mae"</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code># A tibble: 1 x 2
  num_comp .config              
     &lt;dbl&gt; &lt;chr&gt;                
1        4 Preprocessor1_Model04</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tuned_pls_results</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select_best</span><span class='op'>(</span><span class='st'>"rmse"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1 x 2
  num_comp .config              
     &lt;dbl&gt; &lt;chr&gt;                
1        4 Preprocessor1_Model04</code></pre>
</div>
<p>In this case, I will go for num_comp = 4. The aim of PLS is to reduce number of variables, but there would be a slight trade-off in terms of accuracy/error in favor of simplicity of model when determining the number of components.</p>
<p>Update model and workflow:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>updated_pls_model</span> <span class='op'>&lt;-</span>  <span class='fu'>plsmod</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/plsmod/man/pls.html'>pls</a></span><span class='op'>(</span>num_comp <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>set_mode</span><span class='op'>(</span><span class='st'>"regression"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>set_engine</span><span class='op'>(</span><span class='st'>"mixOmics"</span><span class='op'>)</span>

<span class='va'>updated_workflow</span> <span class='op'>&lt;-</span> <span class='va'>pls_workflow</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>update_model</span><span class='op'>(</span><span class='va'>updated_pls_model</span><span class='op'>)</span>
  

<span class='va'>pls_fit</span> <span class='op'>&lt;-</span> <span class='va'>updated_workflow</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>fit</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>gasoline_training</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Check the most important X variables for the updated model:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># check the most important predictors</span>

<span class='va'>tidy_pls</span> <span class='op'>&lt;-</span> <span class='va'>pls_fit</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>pull_workflow_fit</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>tidy</span><span class='op'>(</span><span class='op'>)</span>


<span class='co'># variable importance</span>
<span class='va'>tidy_pls</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>term</span> <span class='op'>!=</span> <span class='st'>"Y"</span>, <span class='co'># outcome variable col name</span>
         <span class='va'>component</span> <span class='op'>==</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>component</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>slice_max</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>value</span><span class='op'>)</span>, n <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>value</span>, <span class='fu'>fct_reorder</span><span class='op'>(</span><span class='va'>term</span>, <span class='va'>value</span><span class='op'>)</span>, fill <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>component</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_col</span><span class='op'>(</span>show.legend <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>facet_wrap</span><span class='op'>(</span> <span class='op'>~</span> <span class='va'>component</span>, scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span> y <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_few</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-11-1.png" width="624" /></p>
</div>
<h1 id="assess">Assess</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># results_train</span>
<span class='va'>pls_fit</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span>new_data <span class='op'>=</span> <span class='va'>gasoline_training</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>truth <span class='op'>=</span> <span class='va'>gasoline_training</span><span class='op'>$</span><span class='va'>octane</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>truth</span>, <span class='va'>.pred</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_abline</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Actual vs Predicted for TRAINING dataset"</span>,
       x <span class='op'>=</span> <span class='st'>"Actual Octane Number"</span>,
       y <span class='op'>=</span> <span class='st'>"Predicted Octane Number"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_few</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-12-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>pls_fit</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span>new_data <span class='op'>=</span> <span class='va'>gasoline_training</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>truth <span class='op'>=</span> <span class='va'>gasoline_training</span><span class='op'>$</span><span class='va'>octane</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>metrics</span><span class='op'>(</span>truth <span class='op'>=</span> <span class='va'>truth</span>, estimate <span class='op'>=</span> <span class='va'>.pred</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>as_tibble</span><span class='op'>(</span><span class='op'>)</span> <span class='co'># rsq is 0.981 for training dataset</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard       0.207
2 rsq     standard       0.981
3 mae     standard       0.168</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># results_test</span>
<span class='va'>pls_fit</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span>new_data <span class='op'>=</span> <span class='va'>gasoline_testing</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>truth <span class='op'>=</span> <span class='va'>gasoline_testing</span><span class='op'>$</span><span class='va'>octane</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>truth</span>, <span class='va'>.pred</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>"deepskyblue3"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_abline</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>"deepskyblue3"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"Actual vs Predicted for TESTING dataset"</span>,
       x <span class='op'>=</span> <span class='st'>"Actual Octane Number"</span>,
       y <span class='op'>=</span> <span class='st'>"Predicted Octane Number"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_few</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Tidy-Models---Partial-Least-Squares-Regression---gasoline_files/figure-html5/unnamed-chunk-12-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>pls_fit</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span>new_data <span class='op'>=</span> <span class='va'>gasoline_testing</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>truth <span class='op'>=</span> <span class='va'>gasoline_testing</span><span class='op'>$</span><span class='va'>octane</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>metrics</span><span class='op'>(</span>truth <span class='op'>=</span> <span class='va'>truth</span>, estimate <span class='op'>=</span> <span class='va'>.pred</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>as_tibble</span><span class='op'>(</span><span class='op'>)</span> <span class='co'># r-sq is 0.989 for testing dataset</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard       0.222
2 rsq     standard       0.983
3 mae     standard       0.151</code></pre>
</div>
<h1 id="to-predict-future-data">To predict future data</h1>
<p>In this case, I will just take the first dataset and check if the predicted value is the actual value. This should not be done, but I did it just to understand how the workflow is.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>trial_data</span> <span class='op'>&lt;-</span> <span class='va'>gasoline_tidy</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>octane</span><span class='op'>)</span> <span class='co'># octane = 85.3</span>

<span class='va'>pls_fit</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>trial_data</span><span class='op'>)</span> <span class='co'># 85.3</span>
</code></pre>
</div>
<pre><code># A tibble: 1 x 1
  .pred
  &lt;dbl&gt;
1  85.2</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># actual value = predicted value</span>
</code></pre>
</div>
</div>
<h1 id="reflections">Reflections</h1>
<p>Through this exercise, I learnt:</p>
<ul>
<li><p>how to format the matrix data into a tibble dataframe. I have not worked with AsIs structure before and had to look up stacksoverflow to understand how to code to get a plot for NIR spectra</p></li>
<li><p>how to apply tidymodels for pls modelling. I also learnt that there were different types of pls algorithms. Perhaps I would compare the different model algorithms for my next practice.</p></li>
<li><p>how to extract variable importance</p></li>
<li><p>how to predict Y variable using a new dataset, although in this case I did not use new data</p></li>
<li><p>I would like to learn how to model for multi-outcome data in the future.</p></li>
</ul>
<h1 id="references">References</h1>
<ul>
<li><p><a href="https://stackoverflow.com/questions/64254295/predictor-importance-for-pls-model-trained-with-tidymodels" class="uri">https://stackoverflow.com/questions/64254295/predictor-importance-for-pls-model-trained-with-tidymodels</a></p></li>
<li><p><a href="https://rpubs.com/RandallThompson15/HW10_624" class="uri">https://rpubs.com/RandallThompson15/HW10_624</a></p></li>
<li><p><a href="https://www.tidyverse.org/blog/2020/04/parsnip-adjacent/" class="uri">https://www.tidyverse.org/blog/2020/04/parsnip-adjacent/</a></p></li>
<li><p>Applied Predictive Modelling, Max Kuhn and Kjell Johnson, Chapter 6. <a href="http://appliedpredictivemodeling.com/" class="uri">http://appliedpredictivemodeling.com/</a></p></li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<div class="article-footer">
  <p class="social_footer">
    <span class="disqus-comments">
      <i class="fas fa-comments"></i>
      &nbsp;
      <span class="disqus-comment-count" data-disqus-identifier="posts/20210309_tidy models plsr gasoline/">Comment on this article</span>
    </span>
    <span class="article-sharing">
      Share: &nbsp;
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Flruolin.github.io%2FmyBlog%2Fposts%2F20210309_tidy%20models%20plsr%20gasoline%2F&amp;title=Tidy%20Models%20-%20Regression">
        <i class="fab fa-linkedin"></i>
      </a>
    </span>
  </p>
  <script id="dsq-count-scr" src="https://https-lruolin-github-io-myblog-2.disqus.com/count.js" async></script>
  <div id="disqus_thread" class="hidden"></div>
  <script type="text/javascript" cookie-consent="functionality">
var disqus_config = function () {
  this.page.url = 'https://lruolin.github.io/myBlog/posts/20210309_tidy models plsr gasoline/';
  this.page.identifier = 'posts/20210309_tidy models plsr gasoline/';
};
(function() {
  var d = document, s = d.createElement('script');
  s.src = 'https://https-lruolin-github-io-myblog-2.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script>
</div>
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">lruolin (2021, March 9). pRactice corner: Tidy Models - Regression. Retrieved from https://lruolin.github.io/myBlog/posts/20210309_tidy models plsr gasoline/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{lruolin2021tidy,
  author = {lruolin, },
  title = {pRactice corner: Tidy Models - Regression},
  url = {https://lruolin.github.io/myBlog/posts/20210309_tidy models plsr gasoline/},
  year = {2021}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
