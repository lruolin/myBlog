<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>pRactice corner: Predicting coffee cupping scores</title>

<meta property="description" itemprop="description" content="Revisiting the coffee dataset"/>

<link rel="canonical" href="https://lruolin.github.io/myBlog/posts/20220625 - Predict coffee cupping score/"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2022-06-25"/>
<meta property="article:created" itemprop="dateCreated" content="2022-06-25"/>
<meta name="article:author" content="lruolin"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="pRactice corner: Predicting coffee cupping scores"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Revisiting the coffee dataset"/>
<meta property="og:url" content="https://lruolin.github.io/myBlog/posts/20220625 - Predict coffee cupping score/"/>
<meta property="og:image" content="https://lruolin.github.io/myBlog/posts/20220625 - Predict coffee cupping score/Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-7-1.png"/>
<meta property="og:image:width" content="1248"/>
<meta property="og:image:height" content="768"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="pRactice corner"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="pRactice corner: Predicting coffee cupping scores"/>
<meta property="twitter:description" content="Revisiting the coffee dataset"/>
<meta property="twitter:url" content="https://lruolin.github.io/myBlog/posts/20220625 - Predict coffee cupping score/"/>
<meta property="twitter:image" content="https://lruolin.github.io/myBlog/posts/20220625 - Predict coffee cupping score/Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-7-1.png"/>
<meta property="twitter:image:width" content="1248"/>
<meta property="twitter:image:height" content="768"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="pRactice corner: Predicting coffee cupping scores"/>
<meta name="citation_fulltext_html_url" content="https://lruolin.github.io/myBlog/posts/20220625 - Predict coffee cupping score/"/>
<meta name="citation_online_date" content="2022/06/25"/>
<meta name="citation_publication_date" content="2022/06/25"/>
<meta name="citation_author" content="lruolin"/>
<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","editor_options","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["Predicting coffee cupping scores"]},{"type":"character","attributes":{},"value":["Revisiting the coffee dataset"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["lruolin"]}]}]},{"type":"character","attributes":{},"value":["06-25-2022"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]}]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["chunk_output_type"]}},"value":[{"type":"character","attributes":{},"value":["console"]}]},{"type":"character","attributes":{},"value":["https://lruolin.github.io/myBlog/posts/20220625 - Predict coffee cupping score/"]},{"type":"character","attributes":{},"value":["https://lruolin.github.io/myBlog/posts/20220625 - Predict coffee cupping score/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["Predict-coffee-cupping-score_files/anchor-4.2.2/anchor.min.js","Predict-coffee-cupping-score_files/bowser-1.9.3/bowser.min.js","Predict-coffee-cupping-score_files/crosstalk-1.2.0/css/crosstalk.min.css","Predict-coffee-cupping-score_files/crosstalk-1.2.0/js/crosstalk.js","Predict-coffee-cupping-score_files/crosstalk-1.2.0/js/crosstalk.js.map","Predict-coffee-cupping-score_files/crosstalk-1.2.0/js/crosstalk.min.js","Predict-coffee-cupping-score_files/crosstalk-1.2.0/js/crosstalk.min.js.map","Predict-coffee-cupping-score_files/crosstalk-1.2.0/scss/crosstalk.scss","Predict-coffee-cupping-score_files/datatables-binding-0.23/datatables.js","Predict-coffee-cupping-score_files/datatables-css-0.0.0/datatables-crosstalk.css","Predict-coffee-cupping-score_files/distill-2.2.21/template.v2.js","Predict-coffee-cupping-score_files/dt-core-1.11.3/css/jquery.dataTables.extra.css","Predict-coffee-cupping-score_files/dt-core-1.11.3/css/jquery.dataTables.min.css","Predict-coffee-cupping-score_files/dt-core-1.11.3/js/jquery.dataTables.min.js","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-10-2.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-10-3.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-2.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-3.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-4.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-5.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-6.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-2.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-3.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-4.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-5.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-6.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-7.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-13-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-14-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-14-2.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-14-3.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-14-4.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-14-5.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-14-6.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-14-7.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-15-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-2.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-3.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-4.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-5.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-6.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-7.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-17-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-20-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-22-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-23-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-25-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-7-1.png","Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-9-3.png","Predict-coffee-cupping-score_files/header-attrs-2.14/header-attrs.js","Predict-coffee-cupping-score_files/htmlwidgets-1.5.4/htmlwidgets.js","Predict-coffee-cupping-score_files/jquery-3.6.0/jquery-3.6.0.js","Predict-coffee-cupping-score_files/jquery-3.6.0/jquery-3.6.0.min.js","Predict-coffee-cupping-score_files/jquery-3.6.0/jquery-3.6.0.min.map","Predict-coffee-cupping-score_files/plotly-binding-4.10.0/plotly.js","Predict-coffee-cupping-score_files/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css","Predict-coffee-cupping-score_files/plotly-main-2.5.1/plotly-latest.min.js","Predict-coffee-cupping-score_files/popper-2.6.0/popper.min.js","Predict-coffee-cupping-score_files/tippy-6.2.7/tippy-bundle.umd.min.js","Predict-coffee-cupping-score_files/tippy-6.2.7/tippy-light-border.css","Predict-coffee-cupping-score_files/tippy-6.2.7/tippy.css","Predict-coffee-cupping-score_files/tippy-6.2.7/tippy.umd.min.js","Predict-coffee-cupping-score_files/typedarray-0.1/typedarray.min.js","Predict-coffee-cupping-score_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      if ($(this).children()[0].nodeName == "D-FOOTNOTE") {
        var fn = $(this).children()[0]
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        return "<p>" + $('#ref-' + ref).html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.14/header-attrs.js"></script>
  <script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
  <link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
  <script src="../../site_libs/datatables-binding-0.23/datatables.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="../../site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
  <link href="../../site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
  <script src="../../site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
  <link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
  <script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
  <script src="../../site_libs/plotly-binding-4.10.0/plotly.js"></script>
  <script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
  <link href="../../site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
  <script src="../../site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Predicting coffee cupping scores","description":"Revisiting the coffee dataset","authors":[{"author":"lruolin","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-06-25T00:00:00.000+08:00","citationText":"lruolin, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">pRactice corner</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="../../usefullinks.html">Useful Links</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Predicting coffee cupping scores</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Revisiting the coffee dataset</p></p>
</div>

<div class="d-byline">
  lruolin  
  
<br/>06-25-2022
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#background">Background</a></li>
<li><a href="#key-objectives-and-learning-points">Key Objectives and Learning Points</a></li>
<li><a href="#loading-packages">Loading packages</a></li>
<li><a href="#loading-the-data">Loading the data</a></li>
<li><a href="#data-wrangling">Data wrangling</a></li>
<li><a href="#tidymodels">Tidymodels</a>
<ul>
<li><a href="#split">Split</a></li>
<li><a href="#preprocess">Preprocess</a></li>
<li><a href="#fit">Fit</a></li>
<li><a href="#tune">Tune</a></li>
<li><a href="#cross-validate">Cross-validate</a></li>
<li><a href="#assess-model">Assess model</a></li>
<li><a href="#assess-predictions">Assess predictions</a></li>
<li><a href="#variable-importance">Variable Importance</a></li>
</ul></li>
<li><a href="#references">References:</a></li>
</ul>
</nav>
</div>
<h1 id="background">Background</h1>
<p>Revisiting the dataset to see if total cupping score can be predicted from the variables in the dataset.</p>
<p>What I know so far:</p>
<ul>
<li><p>Total Cupping Score is the summation of scores from the 10 attributes: aroma, flavor, aftertaste, acidity, body, balance, uniformity, clean_cup, sweetness and cupper_points.</p></li>
<li><p>Quakers refer to immature/unripe beans. This is a defect variable, same as category_one_defect and category_two_defect. The more the defects, the lower the total cupping score.</p></li>
</ul>
<h1 id="key-objectives-and-learning-points">Key Objectives and Learning Points</h1>
<ul>
<li><p>To carry out data cleaning and EDA for this dataset</p></li>
<li><p>To practice using tidymodels framework to predict total cupping score</p></li>
</ul>
<p>Most of the exercises I encountered online use the 10 attributes as part of prediction for the total cupping score, but I decided to leave them out due to the way it is calculated. I wanted to look at whether other variables, such as country of origin, processing methods, moisture etc can predict the total cupping score.</p>
<p>However, towards the end of the exercises, when I was evaluating the model, I realised that my model is really quite sub-optimal. The r-sq was ridiculously low, and the rmse is about 3.</p>
<p>What could the reason be? Perhaps the choice of variables was not suitable, perhaps I did not engineer my features well enough? I think I already chose the easiest algorithm, as the dataset was very skewed and had a lot of categories, so I decided to use random forest, which doesnt require a lot of feature engineering</p>
<p>Perhaps these variables are not enough to predict the cupping score? Quality isnt just a measure of country, region, processing methods, although they can give some indications as to whether the coffee beans are good Im probably missing some additional information</p>
<p>Other exercises that used the 10 attributes had very good R-sq values, and understandably so, because total cupping points are calculated from these attributes by summing them up</p>
<p>Nevertheless, I shall take it as an exercise using the tidymodels framework, and let me mull over how my ML can be improved</p>
<h1 id="loading-packages">Loading packages</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/trinker/pacman'>pacman</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/pacman/man/p_load.html'>p_load</a></span><span class='op'>(</span><span class='co'>#qacData, </span>
       <span class='va'>tidyverse</span>, <span class='va'>lubridate</span>,
       <span class='va'>janitor</span>, <span class='va'>skimr</span>,
       <span class='va'>ggsci</span>, <span class='va'>ggthemes</span>, <span class='va'>ggthemr</span>,
       <span class='va'>DT</span>,
       <span class='va'>tidymodels</span>,
       <span class='va'>GGally</span>,
       <span class='va'>doParallel</span>, <span class='va'>ranger</span>,
       <span class='va'>plotly</span>,
       <span class='va'>vip</span><span class='op'>)</span>

<span class='fu'>ggthemr</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ggthemr/man/ggthemr.html'>ggthemr</a></span><span class='op'>(</span><span class='st'>"fresh"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h1 id="loading-the-data">Loading the data</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>coffee_ratings</span> <span class='op'>&lt;-</span> <span class='fu'>readr</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/readr/man/read_delim.html'>read_csv</a></span><span class='op'>(</span><span class='st'>'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-07-07/coffee_ratings.csv'</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h1 id="data-wrangling">Data wrangling</h1>
<p>Extracting column names</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># extract col names-----</span>
<span class='va'>coffee_col_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>coffee_ratings</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>as_tibble</span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span>

<span class='va'>coffee_col_names</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 43  1
   value                
   &lt;chr&gt;                
 1 total_cup_points     
 2 species              
 3 owner                
 4 country_of_origin    
 5 farm_name            
 6 lot_number           
 7 mill                 
 8 ico_number           
 9 company              
10 altitude             
11 region               
12 producer             
13 number_of_bags       
14 bag_weight           
15 in_country_partner   
16 harvest_year         
17 grading_date         
18 owner_1              
19 variety              
20 processing_method    
21 aroma                
22 flavor               
23 aftertaste           
24 acidity              
25 body                 
26 balance              
27 uniformity           
28 clean_cup            
29 sweetness            
30 cupper_points        
31 moisture             
32 category_one_defects 
33 quakers              
34 color                
35 category_two_defects 
36 expiration           
37 certification_body   
38 certification_address
39 certification_contact
40 unit_of_measurement  
41 altitude_low_meters  
42 altitude_high_meters 
43 altitude_mean_meters </code></pre>
</div>
<p>Initial look at the data</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>skim</span><span class='op'>(</span><span class='va'>coffee_ratings</span><span class='op'>)</span>
</code></pre>
</div>
<table>
<caption><span id="tab:unnamed-chunk-4">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">coffee_ratings</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1339</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">43</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">24</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">19</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">species</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">owner</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">315</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">country_of_origin</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">farm_name</td>
<td style="text-align: right;">359</td>
<td style="text-align: right;">0.73</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">571</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lot_number</td>
<td style="text-align: right;">1063</td>
<td style="text-align: right;">0.21</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">71</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">227</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">mill</td>
<td style="text-align: right;">315</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">77</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">460</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ico_number</td>
<td style="text-align: right;">151</td>
<td style="text-align: right;">0.89</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">847</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">company</td>
<td style="text-align: right;">209</td>
<td style="text-align: right;">0.84</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">281</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">altitude</td>
<td style="text-align: right;">226</td>
<td style="text-align: right;">0.83</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">396</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">region</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">356</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">producer</td>
<td style="text-align: right;">231</td>
<td style="text-align: right;">0.83</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">691</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">bag_weight</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">in_country_partner</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">harvest_year</td>
<td style="text-align: right;">47</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">grading_date</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">567</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">owner_1</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">319</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">variety</td>
<td style="text-align: right;">226</td>
<td style="text-align: right;">0.83</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">processing_method</td>
<td style="text-align: right;">170</td>
<td style="text-align: right;">0.87</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">color</td>
<td style="text-align: right;">218</td>
<td style="text-align: right;">0.84</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">expiration</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">566</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">certification_body</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">certification_address</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">certification_contact</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">unit_of_measurement</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col style="width: 20%" />
<col style="width: 9%" />
<col style="width: 13%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 2%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 9%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">total_cup_points</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">82.09</td>
<td style="text-align: right;">3.50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">81.08</td>
<td style="text-align: right;">82.50</td>
<td style="text-align: right;">83.67</td>
<td style="text-align: right;">90.58</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">number_of_bags</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">154.18</td>
<td style="text-align: right;">129.99</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">14.00</td>
<td style="text-align: right;">175.00</td>
<td style="text-align: right;">275.00</td>
<td style="text-align: right;">1062.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">aroma</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">7.57</td>
<td style="text-align: right;">0.38</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.42</td>
<td style="text-align: right;">7.58</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">8.75</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">flavor</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">7.52</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.58</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">8.83</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">aftertaste</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">7.40</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.25</td>
<td style="text-align: right;">7.42</td>
<td style="text-align: right;">7.58</td>
<td style="text-align: right;">8.67</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">acidity</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">7.54</td>
<td style="text-align: right;">0.38</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.58</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">8.75</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">body</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">7.52</td>
<td style="text-align: right;">0.37</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.67</td>
<td style="text-align: right;">8.58</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">balance</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">7.52</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">8.75</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">uniformity</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">9.83</td>
<td style="text-align: right;">0.55</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">clean_cup</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">9.84</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">sweetness</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">9.86</td>
<td style="text-align: right;">0.62</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">cupper_points</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.25</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">moisture</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: right;">0.28</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">category_one_defects</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">2.55</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">63.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">quakers</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.17</td>
<td style="text-align: right;">0.83</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">11.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">category_two_defects</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.56</td>
<td style="text-align: right;">5.31</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">55.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">altitude_low_meters</td>
<td style="text-align: right;">230</td>
<td style="text-align: right;">0.83</td>
<td style="text-align: right;">1750.71</td>
<td style="text-align: right;">8669.44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1100.00</td>
<td style="text-align: right;">1310.64</td>
<td style="text-align: right;">1600.00</td>
<td style="text-align: right;">190164.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">altitude_high_meters</td>
<td style="text-align: right;">230</td>
<td style="text-align: right;">0.83</td>
<td style="text-align: right;">1799.35</td>
<td style="text-align: right;">8668.81</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1100.00</td>
<td style="text-align: right;">1350.00</td>
<td style="text-align: right;">1650.00</td>
<td style="text-align: right;">190164.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">altitude_mean_meters</td>
<td style="text-align: right;">230</td>
<td style="text-align: right;">0.83</td>
<td style="text-align: right;">1775.03</td>
<td style="text-align: right;">8668.63</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1100.00</td>
<td style="text-align: right;">1310.64</td>
<td style="text-align: right;">1600.00</td>
<td style="text-align: right;">190164.00</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># count -----</span>
<span class='va'>coffee_ratings</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>count</span><span class='op'>(</span><span class='va'>species</span><span class='op'>)</span> <span class='co'># mostly arabica</span>
</code></pre>
</div>
<pre><code># A tibble: 2  2
  species     n
  &lt;chr&gt;   &lt;int&gt;
1 Arabica  1311
2 Robusta    28</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>coffee_ratings</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>count</span><span class='op'>(</span><span class='va'>owner</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># 316 unique owners</span>
</code></pre>
</div>
<pre><code># A tibble: 316  2
   owner                                n
   &lt;chr&gt;                            &lt;int&gt;
 1 juan luis alvarado romero          155
 2 racafe &amp; cia s.c.a                  60
 3 exportadora de cafe condor s.a      54
 4 kona pacific farmers cooperative    52
 5 ipanema coffees                     50
 6 cqi taiwan icp cqi      47
 7 lin, che-hao krude            30
 8 nucoffee                            29
 9 carcafe ltda ci                     27
10 the coffee source inc.              23
#  with 306 more rows</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create a function to count and sort</span>
<span class='va'>count_and_sort</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>col</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>coffee_ratings</span> <span class='op'>%&gt;%</span> 
    <span class='fu'>count</span><span class='op'>(</span><span class='op'>{</span><span class='op'>{</span><span class='va'>col</span><span class='op'>}</span><span class='op'>}</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># 37 unique countries</span>
<span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>country_of_origin</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 37  2
   country_of_origin                n
   &lt;chr&gt;                        &lt;int&gt;
 1 Mexico                         236
 2 Colombia                       183
 3 Guatemala                      181
 4 Brazil                         132
 5 Taiwan                          75
 6 United States (Hawaii)          73
 7 Honduras                        53
 8 Costa Rica                      51
 9 Ethiopia                        44
10 Tanzania, United Republic Of    40
#  with 27 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>farm_name</span><span class='op'>)</span> <span class='co'># many missing values for farm name, 572 unique farms</span>
</code></pre>
</div>
<pre><code># A tibble: 572  2
   farm_name                        n
   &lt;chr&gt;                        &lt;int&gt;
 1 &lt;NA&gt;                           359
 2 various                         47
 3 rio verde                       23
 4 several                         20
 5 finca medina                    15
 6 doi tung development project    13
 7 fazenda capoeirnha              13
 8 conquista / morito              11
 9 los hicaques                    11
10 capoeirinha                     10
#  with 562 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>lot_number</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 228  2
   lot_number                                                        n
   &lt;chr&gt;                                                         &lt;int&gt;
 1 &lt;NA&gt;                                                           1063
 2 1                                                                18
 3 020/17                                                            6
 4 019/17                                                            5
 5 102                                                               3
 6 103                                                               3
 7 2                                                                 3
 8 2016 Tainan Coffee Cupping Event Micro Lot      3
 9 017-053-0046                                                      2
10 1-198                                                             2
#  with 218 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>owner</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 316  2
   owner                                n
   &lt;chr&gt;                            &lt;int&gt;
 1 juan luis alvarado romero          155
 2 racafe &amp; cia s.c.a                  60
 3 exportadora de cafe condor s.a      54
 4 kona pacific farmers cooperative    52
 5 ipanema coffees                     50
 6 cqi taiwan icp cqi      47
 7 lin, che-hao krude            30
 8 nucoffee                            29
 9 carcafe ltda ci                     27
10 the coffee source inc.              23
#  with 306 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>farm_name</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 572  2
   farm_name                        n
   &lt;chr&gt;                        &lt;int&gt;
 1 &lt;NA&gt;                           359
 2 various                         47
 3 rio verde                       23
 4 several                         20
 5 finca medina                    15
 6 doi tung development project    13
 7 fazenda capoeirnha              13
 8 conquista / morito              11
 9 los hicaques                    11
10 capoeirinha                     10
#  with 562 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>species</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2  2
  species     n
  &lt;chr&gt;   &lt;int&gt;
1 Arabica  1311
2 Robusta    28</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>mill</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 461  2
   mill                                n
   &lt;chr&gt;                           &lt;int&gt;
 1 &lt;NA&gt;                              315
 2 beneficio ixchel                   90
 3 dry mill                           39
 4 trilladora boananza                38
 5 ipanema coffees                    16
 6 neiva                              15
 7 bachue                             14
 8 beneficio siembras vision (154)    12
 9 cadexsa                            12
10 cigrah s.a de c.v.                 12
#  with 451 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>ico_number</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 848  2
   ico_number        n
   &lt;chr&gt;         &lt;int&gt;
 1 &lt;NA&gt;            151
 2 0                77
 3 Taiwan           31
 4 2222             11
 5 -                 9
 6 002/1660/0105     7
 7 002/4177/0150     7
 8 Taiwan        7
 9 002/1660/0080     6
10 1                 6
#  with 838 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>company</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 282  2
   company                              n
   &lt;chr&gt;                            &lt;int&gt;
 1 &lt;NA&gt;                               209
 2 unex guatemala, s.a.                86
 3 ipanema coffees                     50
 4 exportadora de cafe condor s.a      40
 5 kona pacific farmers cooperative    40
 6 racafe &amp; cia s.c.a                  40
 7 blossom valley              25
 8 carcafe ltda                        25
 9 nucoffee                            24
10 taiwan coffee laboratory            20
#  with 272 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>altitude</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 397  2
   altitude     n
   &lt;chr&gt;    &lt;int&gt;
 1 &lt;NA&gt;       226
 2 1100        43
 3 1200        42
 4 1300        32
 5 1400        32
 6 4300        31
 7 1250        30
 8 1500        30
 9 1700        28
10 1550        24
#  with 387 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>region</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 357  2
   region             n
   &lt;chr&gt;          &lt;int&gt;
 1 huila            112
 2 oriente           80
 3 south of minas    68
 4 kona              66
 5 &lt;NA&gt;              59
 6 veracruz          35
 7 tarrazu           19
 8 comayagua         17
 9 huehuetenango     16
10 san marcos        16
#  with 347 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>producer</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 692  2
   producer                         n
   &lt;chr&gt;                        &lt;int&gt;
 1 &lt;NA&gt;                           231
 2 La Plata                        30
 3 Ipanema Agrcola SA             22
 4 Doi Tung Development Project    17
 5 Ipanema Agricola                12
 6 VARIOS                          12
 7 Ipanema Agricola S.A            11
 8 ROBERTO MONTERROSO              10
 9 AMILCAR LAPOLA                   9
10 LA PLATA                         9
#  with 682 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>bag_weight</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 56  2
   bag_weight     n
   &lt;chr&gt;      &lt;int&gt;
 1 1 kg         331
 2 60 kg        256
 3 69 kg        200
 4 70 kg        156
 5 2 kg         122
 6 100 lbs       59
 7 30 kg         29
 8 5 lbs         23
 9 6             19
10 20 kg         14
#  with 46 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>in_country_partner</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 27  2
   in_country_partner                             n
   &lt;chr&gt;                                      &lt;int&gt;
 1 Specialty Coffee Association                 313
 2 AMECAFE                                      205
 3 Almacaf                                     178
 4 Asociacion Nacional Del Caf                 155
 5 Brazil Specialty Coffee Association           67
 6 Instituto Hondureo del Caf                  60
 7 Blossom Valley International                  58
 8 Africa Fine Coffee Association                49
 9 Specialty Coffee Association of Costa Rica    42
10 NUCOFFEE                                      36
#  with 17 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>harvest_year</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 47  2
   harvest_year     n
   &lt;chr&gt;        &lt;int&gt;
 1 2012           354
 2 2014           233
 3 2013           181
 4 2015           129
 5 2016           124
 6 2017            70
 7 &lt;NA&gt;            47
 8 2013/2014       29
 9 2015/2016       28
10 2011            26
#  with 37 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>grading_date</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 567  2
   grading_date             n
   &lt;chr&gt;                &lt;int&gt;
 1 July 11th, 2012         25
 2 December 26th, 2013     24
 3 June 6th, 2012          19
 4 August 30th, 2012       18
 5 July 26th, 2012         15
 6 March 29th, 2013        13
 7 October 8th, 2015       13
 8 September 27th, 2012    13
 9 June 17th, 2010         12
10 October 20th, 2017      11
#  with 557 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>owner_1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 320  2
   owner_1                              n
   &lt;chr&gt;                            &lt;int&gt;
 1 Juan Luis Alvarado Romero          155
 2 Racafe &amp; Cia S.C.A                  60
 3 Exportadora de Cafe Condor S.A      54
 4 Kona Pacific Farmers Cooperative    52
 5 Ipanema Coffees                     50
 6 CQI Taiwan ICP CQI      46
 7 Lin, Che-Hao Krude            29
 8 NUCOFFEE                            29
 9 CARCAFE LTDA CI                     27
10 The Coffee Source Inc.              23
#  with 310 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>variety</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 30  2
   variety            n
   &lt;chr&gt;          &lt;int&gt;
 1 Caturra          256
 2 Bourbon          226
 3 &lt;NA&gt;             226
 4 Typica           211
 5 Other            110
 6 Catuai            74
 7 Hawaiian Kona     44
 8 Yellow Bourbon    35
 9 Mundo Novo        33
10 Catimor           20
#  with 20 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>processing_method</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6  2
  processing_method             n
  &lt;chr&gt;                     &lt;int&gt;
1 Washed / Wet                815
2 Natural / Dry               258
3 &lt;NA&gt;                        170
4 Semi-washed / Semi-pulped    56
5 Other                        26
6 Pulped natural / honey       14</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>color</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 5  2
  color            n
  &lt;chr&gt;        &lt;int&gt;
1 Green          870
2 &lt;NA&gt;           218
3 Bluish-Green   114
4 Blue-Green      85
5 None            52</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>expiration</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 566  2
   expiration               n
   &lt;chr&gt;                &lt;int&gt;
 1 December 26th, 2014     25
 2 July 11th, 2013         25
 3 June 6th, 2013          19
 4 August 30th, 2013       18
 5 July 26th, 2013         15
 6 March 29th, 2014        13
 7 October 7th, 2016       13
 8 September 27th, 2013    13
 9 June 17th, 2011         12
10 October 20th, 2018      11
#  with 556 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>certification_body</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>datatable</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-2bab8747c1102e5a22a1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2bab8747c1102e5a22a1">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26"],["Specialty Coffee Association","AMECAFE","Almacaf","Asociacion Nacional Del Caf","Brazil Specialty Coffee Association","Instituto Hondureo del Caf","Blossom Valley International","Africa Fine Coffee Association","Specialty Coffee Association of Costa Rica","NUCOFFEE","Uganda Coffee Development Authority","Kenya Coffee Traders Association","Ethiopia Commodity Exchange","Specialty Coffee Institute of Asia","METAD Agricultural Development plc","Yunnan Coffee Exchange","Salvadoran Coffee Council","Specialty Coffee Association of Indonesia","Asociacin de Cafs Especiales de Nicaragua","Centro Agroecolgico del Caf A.C.","Coffee Quality Institute","Asociacin Mexicana De Cafs y Cafeteras De Especialidad A.C.","Tanzanian Coffee Board","Torch Coffee Lab Yunnan","Blossom Valley International\n","Central De Organizaciones Productoras De Caf y Cacao Del Per - Central Caf &amp; Cacao"],[313,205,178,155,67,60,58,49,43,36,32,22,18,16,15,12,11,10,8,8,7,6,6,2,1,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>certification_body<\/th>\n      <th>n<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>count_and_sort</span><span class='op'>(</span><span class='va'>unit_of_measurement</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2  2
  unit_of_measurement     n
  &lt;chr&gt;               &lt;int&gt;
1 m                    1157
2 ft                    182</code></pre>
</div>
<p>Robusta vs Arabica</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># robusta vs arabica -----</span>

<span class='va'>coffee_ratings</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>total_cup_points</span>, fill <span class='op'>=</span> <span class='va'>species</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_density</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.4</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-7-1.png" width="624" /></p>
</div>
<p>Change to correct columns and remove redundant columns</p>
<p>Filter to just include Arabica, since Robusta is traditionally a more inferior grade</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>coffee_a</span> <span class='op'>&lt;-</span> 
  <span class='va'>coffee_ratings</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/dplyr/man/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>species</span> <span class='op'>==</span> <span class='st'>"Arabica"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span><span class='fu'>across</span><span class='op'>(</span><span class='fu'>where</span><span class='op'>(</span><span class='va'>is.character</span><span class='op'>)</span>, <span class='va'>as.factor</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate_at</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"altitude"</span><span class='op'>)</span>, <span class='va'>as.numeric</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate_at</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"harvest_year"</span><span class='op'>)</span>, <span class='va'>as.character</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>grading_date <span class='op'>=</span> <span class='fu'>lubridate</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/lubridate/man/ymd.html'>mdy</a></span><span class='op'>(</span><span class='va'>grading_date</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>expiration <span class='op'>=</span> <span class='fu'>lubridate</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/lubridate/man/ymd.html'>mdy</a></span><span class='op'>(</span><span class='va'>expiration</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='co'># collapse less than 10 into 1 category</span>
  <span class='fu'>mutate</span><span class='op'>(</span>certification_body <span class='op'>=</span> <span class='fu'>fct_lump_min</span><span class='op'>(</span><span class='va'>certification_body</span>,<span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='va'>lot_number</span>,
         <span class='op'>-</span><span class='va'>ico_number</span>,
         <span class='op'>-</span><span class='va'>bag_weight</span>,
         <span class='op'>-</span><span class='va'>farm_name</span>,
         <span class='op'>-</span><span class='va'>mill</span>,
         <span class='op'>-</span><span class='va'>producer</span>,
         <span class='op'>-</span><span class='va'>owner_1</span>,
         <span class='op'>-</span><span class='va'>certification_address</span>,
         <span class='op'>-</span><span class='va'>certification_contact</span>
  <span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Next, to clean up the harvest years.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>harvest_years</span> <span class='op'>&lt;-</span> 
  <span class='va'>coffee_a</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>harvest_year</span>, 
         <span class='co'># grading_date</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span>nrow <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 47  1
   harvest_year          
   &lt;chr&gt;                 
 1 2014                  
 2 &lt;NA&gt;                  
 3 2013                  
 4 2012                  
 5 March 2010            
 6 Sept 2009 - April 2010
 7 May-August            
 8 2009/2010             
 9 2015                  
10 2011                  
#  with 37 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>harvest_years</span> <span class='op'>%&gt;%</span> <span class='fu'>datatable</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-7f3572641517d93a0934" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-7f3572641517d93a0934">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47"],["2014",null,"2013","2012","March 2010","Sept 2009 - April 2010","May-August","2009/2010","2015","2011","2016","2015/2016","2010","Fall 2009","2017","2009 / 2010","2010-2011","2009-2010","2009 - 2010","2013/2014","2017 / 2018","mmm","TEST","December 2009-March 2010","2014/2015","2011/2012","January 2011","4T/10","2016 / 2017","23 July 2010","January Through April","1T/2011","4t/2010","4T/2010","August to December","Mayo a Julio","47/2010","Abril - Julio","4t/2011","Abril - Julio /2011","Spring 2011 in Colombia.","3T/2011","2016/2017","1t/2011","2018","4T72010","08/09 crop"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>harvest_year<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>coffee_b</span> <span class='op'>&lt;-</span> 
  <span class='va'>coffee_a</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='va'>harvest_year</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"May-August"</span>,
                              <span class='st'>"mmm"</span>,
                              <span class='st'>"TEST"</span>,
                              <span class='st'>"January Through April"</span>,
                              <span class='st'>"August to December"</span>,
                              <span class='st'>"Mayo a Julio"</span>,
                              <span class='st'>"Abril - Julio"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>harvest_year <span class='op'>=</span> <span class='fu'>str_to_lower</span><span class='op'>(</span><span class='va'>harvest_year</span><span class='op'>)</span>,
         harvest_year <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='st'>"[[:punct:]]"</span>, <span class='st'>" "</span><span class='op'>)</span>,
         <span class='co'>#harvest_year_num = str_extract(harvest_year, "\\d{4}"))</span>

         harvest_year <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='st'>"4t 10"</span>, <span class='st'>"2010"</span><span class='op'>)</span>,
         harvest_year <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='st'>"4t 2011"</span>, <span class='st'>"2011"</span><span class='op'>)</span>,
         harvest_year <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='st'>"4t 2010"</span>, <span class='st'>"2010"</span><span class='op'>)</span>,
         harvest_year <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='st'>"47 2010"</span>, <span class='st'>"2010"</span><span class='op'>)</span>,
         harvest_year <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='st'>"23 july 2010"</span>, <span class='st'>"2010"</span><span class='op'>)</span>,
         harvest_year <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='st'>"3t 2011"</span>, <span class='st'>"2011"</span><span class='op'>)</span>,
         harvest_year <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='st'>"4t72010"</span>, <span class='st'>"2010"</span><span class='op'>)</span>,
         harvest_year <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='st'>"08 09 crop"</span>, <span class='st'>"2009"</span><span class='op'>)</span>,
         harvest_year <span class='op'>=</span> <span class='fu'>str_replace_all</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='st'>"1t 2011"</span>, <span class='st'>"2011"</span><span class='op'>)</span>,
         harvest_year_num <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'>parse_number</span><span class='op'>(</span><span class='va'>harvest_year</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># check       </span>
<span class='va'>coffee_b</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='va'>harvest_year_num</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>datatable</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-988bdd7ff867c009f5f7" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-988bdd7ff867c009f5f7">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28"],["2014",null,"2013","2012","march 2010","sept 2009   april 2010","2009 2010","2015","2011","2016","2015 2016","2010","fall 2009","2017","2009   2010","2010 2011","2013 2014","2017   2018","december 2009 march 2010","2014 2015","2011 2012","january 2011","2016   2017","abril   julio  2011","spring 2011 in colombia ","2016 2017","2018","2009"],["2014",null,"2013","2012","2010","2009","2009","2015","2011","2016","2015","2010","2009","2017","2009","2010","2013","2017","2009","2014","2011","2011","2016","2011","2011","2016","2018","2009"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>harvest_year<\/th>\n      <th>harvest_year_num<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>coffee_b</span>,
       <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>harvest_year_num</span>,
           y <span class='op'>=</span> <span class='va'>total_cup_points</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_boxplot</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggtitle</span><span class='op'>(</span><span class='st'>"Harvest years"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-9-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># leave it as it is</span>
<span class='va'>coffee_b</span> <span class='op'>%&gt;%</span> 
  <span class='co'># filter(is.na(harvest_year_num)) %&gt;% </span>
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>harvest_year</span>, <span class='va'>grading_date</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1,301  2
   harvest_year grading_date
   &lt;chr&gt;        &lt;date&gt;      
 1 2014         2015-04-04  
 2 2014         2015-04-04  
 3 &lt;NA&gt;         2010-05-31  
 4 2014         2015-03-26  
 5 2014         2015-04-04  
 6 2013         2013-09-03  
 7 2012         2012-09-17  
 8 march 2010   2010-09-02  
 9 march 2010   2010-09-02  
10 2014         2015-03-30  
#  with 1,291 more rows</code></pre>
</div>
<p>There are some obvious outliers for altitude, which should be removed.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>altitude</span> <span class='op'>&lt;-</span> <span class='va'>coffee_b</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='fu'>starts_with</span><span class='op'>(</span><span class='st'>"altitude"</span><span class='op'>)</span>, <span class='va'>unit_of_measurement</span> <span class='op'>)</span>

<span class='va'>altitude</span> <span class='op'>%&gt;%</span> <span class='fu'>datatable</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-816719ca2cffc8fe186e" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-816719ca2cffc8fe186e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","970","971","972","973","974","975","976","977","978","979","980","981","982","983","984","985","986","987","988","989","990","991","992","993","994","995","996","997","998","999","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","1016","1017","1018","1019","1020","1021","1022","1023","1024","1025","1026","1027","1028","1029","1030","1031","1032","1033","1034","1035","1036","1037","1038","1039","1040","1041","1042","1043","1044","1045","1046","1047","1048","1049","1050","1051","1052","1053","1054","1055","1056","1057","1058","1059","1060","1061","1062","1063","1064","1065","1066","1067","1068","1069","1070","1071","1072","1073","1074","1075","1076","1077","1078","1079","1080","1081","1082","1083","1084","1085","1086","1087","1088","1089","1090","1091","1092","1093","1094","1095","1096","1097","1098","1099","1100","1101","1102","1103","1104","1105","1106","1107","1108","1109","1110","1111","1112","1113","1114","1115","1116","1117","1118","1119","1120","1121","1122","1123","1124","1125","1126","1127","1128","1129","1130","1131","1132","1133","1134","1135","1136","1137","1138","1139","1140","1141","1142","1143","1144","1145","1146","1147","1148","1149","1150","1151","1152","1153","1154","1155","1156","1157","1158","1159","1160","1161","1162","1163","1164","1165","1166","1167","1168","1169","1170","1171","1172","1173","1174","1175","1176","1177","1178","1179","1180","1181","1182","1183","1184","1185","1186","1187","1188","1189","1190","1191","1192","1193","1194","1195","1196","1197","1198","1199","1200","1201","1202","1203","1204","1205","1206","1207","1208","1209","1210","1211","1212","1213","1214","1215","1216","1217","1218","1219","1220","1221","1222","1223","1224","1225","1226","1227","1228","1229","1230","1231","1232","1233","1234","1235","1236","1237","1238","1239","1240","1241","1242","1243","1244","1245","1246","1247","1248","1249","1250","1251","1252","1253","1254","1255","1256","1257","1258","1259","1260","1261","1262","1263","1264","1265","1266","1267","1268","1269","1270","1271","1272","1273","1274","1275","1276","1277","1278","1279","1280","1281","1282","1283","1284","1285","1286","1287","1288","1289","1290","1291","1292","1293","1294","1295","1296","1297","1298","1299","1300","1301"],[225,225,165,209,225,null,null,159,159,200,215,376,378,230,159,380,null,121,190,379,86,94,381,null,73,null,224,102,47,null,null,81,81,196,202,null,null,null,377,81,6,6,15,198,73,null,347,145,116,143,117,null,114,206,164,208,285,280,null,null,188,136,91,null,183,220,208,164,298,208,224,null,73,103,186,199,81,86,366,365,null,null,null,153,149,72,107,null,226,186,null,233,null,null,null,202,null,219,81,1,160,38,105,null,248,null,373,324,175,373,47,62,15,null,244,114,null,143,143,null,202,126,53,326,97,47,185,43,164,193,220,197,47,null,15,149,229,267,285,47,189,null,143,198,134,null,202,287,261,149,168,null,195,122,206,92,38,47,193,183,186,202,364,267,231,97,134,null,81,102,null,373,62,null,339,null,202,134,null,134,null,272,202,186,63,344,249,269,14,47,238,134,250,102,373,373,202,272,175,164,262,186,null,121,44,102,191,186,null,186,251,158,243,373,374,43,212,148,102,147,null,367,338,267,136,195,null,140,null,271,357,null,373,149,null,131,210,null,202,134,292,164,262,262,131,121,373,150,74,187,365,null,178,191,null,336,81,97,351,47,271,null,null,null,null,373,356,149,339,134,102,237,null,212,134,47,5,281,180,47,55,262,74,325,195,267,66,81,8,282,null,null,202,336,271,316,null,178,272,102,240,373,139,195,193,null,311,87,169,171,null,336,186,102,70,351,47,97,328,155,273,195,203,267,267,195,121,267,31,59,285,null,336,252,null,31,373,47,190,202,164,149,149,15,371,14,233,38,201,null,212,14,257,373,118,134,172,null,214,110,178,97,195,195,44,352,102,285,373,279,null,164,268,186,271,212,null,202,47,95,272,null,164,211,262,137,267,null,126,null,null,null,178,null,null,67,47,179,186,31,86,null,35,null,265,17,267,null,217,195,null,null,164,219,null,232,null,null,272,75,15,330,132,137,195,81,null,null,14,267,62,192,373,174,218,204,336,221,162,null,149,134,121,47,164,97,144,115,368,328,181,373,202,null,127,97,288,null,202,267,134,290,30,371,311,195,100,20,355,279,20,349,53,201,null,350,5,313,null,47,55,null,84,null,102,null,null,218,90,null,336,337,335,130,177,271,149,82,275,144,343,47,202,240,137,35,70,166,195,17,17,373,316,47,47,null,141,195,274,166,null,null,null,206,null,null,336,97,134,244,229,322,50,167,29,85,37,114,102,137,137,null,203,195,293,121,69,24,103,null,27,null,198,186,350,70,219,23,263,339,61,49,137,207,373,106,149,70,267,100,53,31,202,186,257,257,134,289,305,70,212,102,350,31,134,373,120,287,10,null,null,81,149,47,47,111,371,null,31,null,336,351,81,47,81,null,5,null,186,149,64,79,112,68,134,206,null,134,null,31,354,205,null,105,206,null,257,25,null,228,null,54,328,113,93,114,55,null,null,195,195,195,70,43,371,342,336,70,102,257,328,113,164,null,140,74,267,195,267,182,31,178,null,8,371,null,164,134,186,186,289,null,164,164,null,234,5,110,79,20,375,74,44,null,373,157,102,81,44,81,97,43,70,121,272,null,193,194,101,361,null,351,212,149,160,77,null,294,123,31,287,null,81,228,299,267,195,81,null,295,270,44,267,38,48,355,272,31,null,121,5,134,97,45,31,306,96,null,291,278,44,70,null,31,339,193,373,null,null,351,134,14,142,164,5,328,97,134,null,186,31,58,49,324,195,42,97,14,47,206,81,null,337,5,56,134,135,null,9,null,81,202,70,24,70,null,171,164,164,353,142,73,89,236,301,328,55,104,203,300,338,352,20,28,null,355,279,221,257,102,21,70,83,216,null,18,null,15,81,360,309,178,14,38,169,289,219,358,70,243,5,5,264,99,109,56,314,92,156,31,97,152,372,null,70,267,134,70,348,173,null,186,23,135,null,321,70,31,149,178,195,336,186,257,121,202,null,null,5,60,186,74,null,102,212,null,133,317,102,295,178,102,47,102,352,null,47,223,323,9,202,38,333,74,267,102,164,178,282,null,276,257,31,102,null,163,258,52,161,262,340,47,256,299,43,164,31,14,70,31,59,7,null,null,31,274,31,109,39,119,31,154,151,null,267,320,31,194,218,null,null,134,40,31,97,47,105,62,126,202,14,31,307,5,31,108,191,186,306,286,134,47,13,47,56,124,113,50,149,362,55,null,202,121,20,null,4,310,34,297,129,138,240,178,81,176,47,null,null,121,null,243,164,263,319,98,null,146,186,33,328,354,31,227,221,164,31,247,null,186,47,296,31,369,287,340,308,241,46,null,81,47,65,31,12,null,204,null,254,293,36,125,184,97,124,86,47,2,null,null,57,144,11,362,47,149,149,null,null,null,null,null,102,47,104,277,null,null,283,134,178,239,71,253,260,70,null,303,121,121,302,128,186,299,25,149,186,186,null,299,267,352,null,null,363,102,164,242,266,341,null,null,312,102,331,149,32,109,267,70,149,14,267,null,31,334,null,228,133,235,81,81,70,255,88,235,328,70,31,null,null,null,81,31,31,31,70,70,null,134,186,70,81,null,222,327,284,328,null,31,102,22,81,121,25,null,31,257,70,328,267,102,359,76,null,70,149,206,246,25,315,153,149,31,260,260,323,227,47,354,316,null,332,14,257,178,94,82,null,149,121,49,186,240,134,31,47,null,257,97,102,81,149,80,81,102,31,null,267,94,70,97,212,43,null,null,262,329,102,81,null,170,102,47,null,134,null,259,267,81,null,null,null,81,25,305,97,null,259,51,267,332,null,52,69,null,14,null,267,318,null,81,267,336,260,134,256,null,47,346,null,49,null,31,267,null,null,null,102,245,70,97,19,null,267,null,31,47,31,78,332,134,70,null,null,186,null,267,41,47,70,null,null,97,51,null,null,304,52,323,202,16,null,126,126,126,339,3,31,280,102],[1950,1950,1600,1800,1950,null,null,1570,1570,1795,1855,1872,1943,609.6,1570,2080,null,1450,1700,2019,1300,1320,2112,null,1250,null,1950,1400,1200,null,null,1300,1300,1750,1800,null,null,null,1941,1300,12,12,1000,1754,1250,null,900,1520,1400,1500,426.72,null,1400,1800,1600,1800,1524,1417.32,null,null,1700,1500,1300,null,1680,1900,1800,1600,1706.88,1800,1950,null,1250,1400,1700,1770,1300,1300,1600,1200,null,null,null,1550,1550,1250,1400,null,2560,1700,null,2136,null,null,null,1800,null,1900,1300,1,1580,1100,1400,null,1066.8,null,1600,800,1620,1600,1200,1200,1000,null,350,1400,null,1500,1500,null,1800,1450,1200,800,1350,1200,170,1150,1600,1750,1900,1750,1200,null,1000,1550,2000,1310.64,1524,1200,1700,null,1500,1754,1500,null,1800,1524,1219.2,1550,1600,null,1750,1450,1800,1300,1100,1200,1750,1680,1700,1800,1100,1310.64,2000,1350,1500,null,1300,1400,null,1600,1200,null,900,null,1800,1500,null,1500,null,442,1800,1700,1200,900,1097.28,1341.12,1000,1200,2560,1500,1099.4136,1400,1600,1600,1800,442,1620,1600,1219.2,1700,null,1450,1170,1400,1700,1700,null,1700,1116.7872,1565,3280,1600,900,1150,1850,1545,1400,1530,null,1,894,1310.64,1500,1750,null,1500,null,442,968,null,1600,1550,null,1480,1800,null,1800,1500,1658.112,1600,1219.2,1219.2,1480,1450,1600,1550,1260,1700,1200,null,1650,1700,null,890,1300,1350,934,1200,442,null,null,null,null,1600,950,1550,900,1500,1400,2527,null,1850,1500,1200,1,480,1650,1200,1200,1219.2,1260,800,1750,1310.64,1218,1300,1250,1499.9208,null,null,1800,890,442,750,null,1650,442,1400,853.44,1600,1500,1750,1750,null,700,1300,1600,1600,null,890,1700,1400,1250,934,1200,1350,800,1550,1356.6648,1750,1800,1310.64,1310.64,1750,1450,1310.64,1100,1200,1524,null,890,1128.3696,null,1100,1600,1200,1700,1800,1600,1550,1550,1000,1600,1000,2136,1100,1799,null,1850,1000,1219.2,1600,1400,1500,1600,null,1850,1400,1650,1350,1750,1750,1170,940,1400,1524,1600,1402.08,null,1600,439,1700,442,1850,null,1800,1200,1330,442,null,1600,1813,1219.2,1500,1310.64,null,1450,null,null,null,1650,null,null,1227,1200,1650,1700,1100,1300,null,1100,null,1280.16,1000,1310.64,null,1880,1750,null,null,1600,1900,null,2100,null,null,442,1261,1000,800,1483,1500,1750,1300,null,null,1000,1310.64,1200,175,1600,1600,1880,1800,890,1901,168,null,1550,1500,1450,1200,1600,1350,1500,1400,1,800,1653,1600,1800,null,1450,1350,1524,null,1800,1310.64,1500,532,1089,1600,700,1750,1380,1000,950,1402.08,1000,900,1200,1799,null,905,1,700,null,1200,1200,null,1300,null,1400,null,null,1880,1300,null,890,894,872,1473,1645,442,1550,1300,1371.6,1500,900,1200,1800,853.44,1500,1100,1250,1600,1750,1000,1000,1600,750,1200,1200,null,1500,1750,1371.6,1600,null,null,null,1800,null,null,890,1350,1500,350,2000,775,1200,1600,1059,1300,11000,1400,1400,1500,1500,null,1800,1750,1658.112,1450,1248,1040,1400,null,1050,null,1754,1700,905,1250,1900,1040,1219.2,900,1200,1200,1500,1800,1600,1400,1550,1250,1310.64,1380,1200,1100,1800,1700,1219.2,1219.2,1500,157.8864,650,1250,1850,1400,905,1100,1500,1600,1442,1524,165,null,null,1300,1550,1200,1200,1400,1600,null,1100,null,890,934,1300,1200,1300,null,1,null,1700,1550,1200,1296,1400,1240,1500,1800,null,1500,null,1100,950,1800,null,1400,1800,null,1219.2,1050,null,200,null,1200,800,1400,1317,1400,1200,null,null,1750,1750,1750,1250,1150,1600,900,890,1250,1400,1219.2,800,1400,1600,null,1500,1260,1310.64,1750,1310.64,1679,1100,1650,null,1250,1600,null,1600,1500,1700,1700,157.8864,null,1600,1600,null,2285,1,1400,1296,1000,null,1260,1170,null,1600,1560,1400,1300,1170,1300,1350,1150,1250,1450,442,null,1750,1750,1396,982,null,934,1850,1550,1580,1268,null,1676.4,1450,1100,1524,null,1300,200,600,1310.64,1750,1300,null,1676.4,441,1170,1310.64,1100,1200,950,442,1100,null,1450,1,1500,1350,1180,1100,650,1338,null,533,1390.8024,1170,1250,null,1100,900,1750,1600,null,null,934,1500,1000,1500,1600,1,800,1350,1500,null,1700,1100,1200,1200,800,1750,1144,1350,1000,1200,1800,1300,null,894,1,1200,1500,1500,null,13,null,1300,1800,1250,1040,1250,null,1600,1600,1600,944,1500,1250,1300,2500,600,800,1200,1400,1800,600,894,940,1000,1050,null,950,1402.08,1901,1219.2,1400,1020,1250,1300,1877,null,1000,null,1000,1300,981,690,1650,1000,1100,1600,157.8864,1900,973,1250,3280,1,1,4001,1350,1400,1200,700,1300,1556,1100,1350,1550,1600,null,1250,1310.64,1500,1250,900,1600,null,1700,1040,1500,null,774,1250,1100,1550,1650,1750,890,1700,1219.2,1450,1800,null,null,1,1200,1700,1260,null,1400,1850,null,150,750,1400,1676.4,1650,1400,1200,1400,940,null,1200,190164,800,13,1800,1100,850,1260,1310.64,1400,1600,1650,1499.9208,null,1371.6,1219.2,1100,1400,null,160,1219.2,1200,1599,1219.2,900,1200,400,600,1150,1600,1100,1000,1250,1100,1200,125,null,null,1100,1371.6,1100,1400,110,1422,1100,1550,1550,null,1310.64,763,1100,1750,1880,null,null,1500,1130,1100,1350,1200,1400,1200,1450,1800,1000,1100,680,1,1100,1400,1700,1700,650,1524,1500,1200,100,1200,1200,1450,1400,1200,1550,990,1200,null,1800,1450,1000,null,null,695,1100,1706.88,1456,1500,853.44,1650,1300,1642,1200,null,null,1450,null,3280,1600,1219.2,758,1350,null,1525,1700,1100,800,950,1100,200,1901,1600,1100,1066.8,null,1700,1200,550,1100,700,1524,900,688,300,1186,null,1300,1200,1210,1100,100,null,1800,null,3825,1658.112,110000,1450,1680,1350,1450,1300,1200,1000,null,null,1200,1500,185,990,1200,1550,1550,null,null,null,null,null,1400,1200,1400,1383.792,null,null,50,1500,1650,280,1250,3800,1219.2,1250,null,1859.28,1450,1450,600,1450,1700,600,1050,1550,1700,1700,null,600,1310.64,940,null,null,995,1400,1600,914.4,4287,900,null,null,700,1400,808,1550,1100,1400,1310.64,1250,1550,1000,1310.64,null,1100,850,null,200,150,250,1300,1300,1250,3845,1300,250,800,1250,1100,null,null,null,1300,1100,1100,1100,1250,1250,null,1500,1700,1250,1300,null,190164,800,500,800,null,1100,1400,1022,1300,1450,1050,null,1100,1219.2,1250,800,1310.64,1400,975,1264,null,1250,1550,1800,1066.8,1050,700,1550,1550,1100,1219.2,1219.2,800,200,1200,950,750,null,850,1000,1219.2,1650,1320,1300,null,1550,1450,1200,1700,853.44,1500,1100,1200,null,1219.2,1350,1400,1300,1550,12,1300,1400,1100,null,1310.64,1320,1250,1350,1850,1150,null,null,1219.2,800,1400,1300,null,1600,1400,1200,null,1500,null,1219.2,1310.64,1300,null,null,null,1300,1050,650,1350,null,1219.2,1200,1310.64,850,null,1200,1248,null,1000,null,1310.64,750,null,1300,1310.64,890,1219.2,1500,400,null,1200,900,null,1200,null,1100,1310.64,null,null,null,1400,3500,1250,1350,1000,null,1310.64,null,1100,1200,1100,1280,850,1500,1250,null,null,1700,null,1310.64,1140,1200,1250,null,null,1350,1200,null,null,640,1200,800,1800,1000,null,1450,1450,1450,900,350,1100,1417.32,1400],[2200,2200,1800,2200,2200,null,null,1700,1700,1850,1955,1872,1943,609.6,1700,2080,null,1450,2000,2019,1300,1320,2112,null,1250,null,1950,1400,1200,null,null,1300,1300,1800,1800,null,null,null,1941,1300,12,12,1000,1754,1250,null,1500,2200,1900,2000,426.72,null,1900,1800,1600,2000,1524,1417.32,null,null,1700,1500,1400,null,1680,1900,2000,1600,1755.648,2000,1950,null,1250,1400,1700,1770,1300,1300,1600,1200,null,null,null,1550,1550,1400,1400,null,2560,1700,null,2136,null,null,null,1800,null,1900,1300,1,1580,1100,1400,null,1584.96,null,1950,800,1620,1950,1200,1200,1000,null,350,1900,null,2000,2000,null,1800,1450,1200,1050,1350,1200,170,1150,1600,1750,1900,1750,1200,null,1000,1550,2000,1310.64,1524,1200,1850,null,2000,1754,1500,null,1800,1524,1219.2,1550,1900,null,1750,1700,1800,1300,1100,1200,1750,1680,1700,1800,1100,1310.64,2000,1350,1500,null,1300,1400,null,1950,1200,null,900,null,1800,1500,null,1500,null,442,1800,1700,1350,1200,1889.76,1432.56,1000,1200,2560,1500,1099.4136,1400,1950,1950,1800,442,1620,1600,1219.2,1700,null,1450,1170,1400,1700,1700,null,1700,1116.7872,1565,3280,1950,1100,1150,1850,1668,1400,1530,null,500,1183,1310.64,1500,1750,null,1700,null,442,968,null,1950,1550,null,1480,1800,null,1800,1500,1755.648,1600,1219.2,1219.2,1480,1450,1950,1550,1260,1700,1200,null,1650,1700,null,890,1300,1350,934,1200,442,null,null,null,null,1950,950,1550,900,1500,1400,2527,null,1850,1500,1200,1,570,1703,1200,1400,1219.2,1260,800,1750,1310.64,1218,1300,1250,1499.9208,null,null,1800,890,442,750,null,1650,442,1400,853.44,1950,1600,1750,1750,null,700,1300,1600,1600,null,890,1700,1400,1250,934,1200,1350,800,1700,1356.6648,1750,2000,1310.64,1310.64,1750,1450,1310.64,1100,1600,1524,null,890,1128.3696,null,1100,1950,1200,2000,1800,1600,1550,1550,1000,1950,1000,2136,1100,1799,null,1850,1000,1219.2,1950,1400,1500,1600,null,1850,1400,1650,1350,1750,1750,1170,940,1400,1524,1950,1402.08,null,1600,439,1700,442,1850,null,1800,1200,1330,442,null,1600,1813,1219.2,1500,1310.64,null,1450,null,null,null,1650,null,null,1227,1200,1650,1700,1100,1300,null,1300,null,1280.16,1000,1310.64,null,1880,1750,null,null,1600,1900,null,2100,null,null,442,1261,1000,800,1483,1500,1750,1300,null,null,1000,1310.64,1200,175,1950,1800,1880,1800,890,1901,168,null,1550,1500,1450,1200,1600,1350,1500,1900,500,800,1653,1950,1800,null,1450,1350,1524,null,1800,1310.64,1500,532,1089,1950,700,1750,1380,1000,950,1402.08,1000,900,1200,1799,null,905,1,800,null,1200,1400,null,1300,null,1400,null,null,1880,1400,null,890,894,872,1473,1645,442,1550,1800,1371.6,1500,1100,1200,1800,853.44,1500,1300,1250,1950,1750,1000,1000,1950,750,1200,1200,null,1750,1750,1371.6,1950,null,null,null,1800,null,null,890,1350,1500,350,2000,775,1200,1600,1059,1300,11000,1900,1400,1500,1500,null,2000,1750,1755.648,1450,1248,1040,1400,null,1850,null,1754,1700,905,1250,1900,1040,1219.2,900,2000,1200,1500,1800,1950,1400,1550,1250,1310.64,1380,1200,1100,1800,1700,1219.2,1219.2,1500,157.8864,650,1250,1850,1400,905,1100,1500,1950,1442,1524,165,null,null,1300,1550,1200,1200,1850,1950,null,1100,null,890,934,1300,1200,1300,null,1,null,1700,1550,1200,1296,1900,1240,1500,1800,null,1500,null,1100,950,5900,null,1400,1800,null,1219.2,1050,null,200,null,1300,800,1500,1317,1900,1400,null,null,1750,1750,1750,1250,1150,1950,1050,890,1250,1400,1219.2,800,1500,1600,null,1700,1260,1310.64,1750,1310.64,1679,1100,1650,null,1250,1950,null,1600,1500,1700,1700,157.8864,null,1600,1600,null,2285,1,1400,1296,1000,null,1260,1170,null,1950,1560,1400,1300,1170,1300,1350,1150,1250,1450,442,null,1750,1750,1396,982,null,934,1850,1550,1580,1268,null,1676.4,1450,1100,1524,null,1300,200,600,1310.64,1750,1300,null,1828.8,441,1170,1310.64,1100,1400,950,442,1100,null,1450,1,1500,1350,1180,1100,650,1338,null,533,1390.8024,1170,1250,null,1100,900,1750,1950,null,null,934,1500,1000,1800,1600,1,800,1350,1500,null,1700,1100,1600,1200,800,1750,1144,1350,1000,1200,1800,1300,null,894,1,1400,1500,1700,null,13,null,1300,1800,1250,1040,1250,null,1600,1600,1600,944,1800,1250,1400,2500,600,800,1400,1400,2000,700,1183,940,1000,1050,null,950,1402.08,1901,1219.2,1400,1020,1250,1800,1877,null,1500,null,1000,1300,981,690,1650,1000,1100,1600,157.8864,1900,973,1250,3280,1,1,4001,1500,1400,1400,700,1300,1556,1100,1350,1550,1950,null,1250,1310.64,1500,1250,950,1800,null,1700,1040,1700,null,774,1250,1100,1550,1650,1750,890,1700,1219.2,1450,1800,null,null,1,1800,1700,1260,null,1400,1850,null,150,750,1400,1828.8,1650,1400,1200,1400,940,null,1200,190164,800,13,1800,1100,850,1260,1310.64,1400,1600,1650,1499.9208,null,1828.8,1219.2,1100,1400,null,200,1219.2,1200,1599,1219.2,900,1200,1250,600,1150,1600,1100,1000,1250,1100,1600,125,null,null,1100,1371.6,1100,1400,110,1422,1100,1550,1550,null,1310.64,763,1100,1750,1880,null,null,1500,1130,1100,1350,1200,1400,1200,1450,1800,1000,1100,680,1,1100,1400,1700,1700,650,1524,1500,1200,2000,1200,1400,1450,1500,1200,1550,1000,1400,null,1800,1450,1000,null,null,695,1100,1706.88,1456,1500,853.44,1650,1300,1642,1200,null,null,1450,null,3280,1600,1219.2,758,1350,null,1525,1700,1100,800,950,1100,200,1901,1600,1100,1066.8,null,1700,1200,550,1100,1400,1524,900,688,300,1186,null,1300,1200,1210,1100,100,null,1800,null,3825,1755.648,110000,1450,1680,1350,1450,1300,1200,1000,null,null,1500,1500,185,1000,1200,1550,1550,null,null,null,null,null,1400,1200,1400,1383.792,null,null,50,1500,1650,280,1250,3800,1219.2,1250,null,1859.28,1450,1450,600,1450,1700,600,1050,1550,1700,1700,null,600,1310.64,940,null,null,995,1400,1600,914.4,4287,900,null,null,700,1400,808,1550,1275,1400,1310.64,1250,1550,1000,1310.64,null,1100,850,null,200,150,250,1300,1300,1250,3845,1500,250,800,1250,1100,null,null,null,1300,1100,1100,1100,1250,1250,null,1500,1700,1250,1300,null,190164,1200,700,800,null,1100,1400,1022,1300,1450,1050,null,1100,1219.2,1250,800,1310.64,1400,975,1264,null,1250,1550,1800,1584.96,1050,700,1550,1550,1100,1219.2,1219.2,800,200,1200,950,750,null,850,1000,1219.2,1650,1320,1800,null,1550,1450,1200,1700,853.44,1500,1100,1200,null,1219.2,1350,1400,1300,1550,12,1300,1400,1100,null,1310.64,1320,1250,1350,1850,1150,null,null,1219.2,800,1400,1300,null,1600,1400,1200,null,1500,null,1219.2,1310.64,1300,null,null,null,1300,1050,650,1350,null,1219.2,1200,1310.64,850,null,1200,1248,null,1000,null,1310.64,800,null,1300,1310.64,890,1219.2,1500,1250,null,1200,1500,null,1200,null,1100,1310.64,null,null,null,1400,3500,1250,1350,1000,null,1310.64,null,1100,1200,1100,1280,850,1500,1250,null,null,1700,null,1310.64,1140,1200,1250,null,null,1350,1200,null,null,1400,1200,800,1800,1000,null,1450,1450,1450,900,350,1100,1417.32,1400],[2075,2075,1700,2000,2075,null,null,1635,1635,1822.5,1905,1872,1943,609.6,1635,2080,null,1450,1850,2019,1300,1320,2112,null,1250,null,1950,1400,1200,null,null,1300,1300,1775,1800,null,null,null,1941,1300,12,12,1000,1754,1250,null,1200,1860,1650,1750,426.72,null,1650,1800,1600,1900,1524,1417.32,null,null,1700,1500,1350,null,1680,1900,1900,1600,1731.264,1900,1950,null,1250,1400,1700,1770,1300,1300,1600,1200,null,null,null,1550,1550,1325,1400,null,2560,1700,null,2136,null,null,null,1800,null,1900,1300,1,1580,1100,1400,null,1325.88,null,1775,800,1620,1775,1200,1200,1000,null,350,1650,null,1750,1750,null,1800,1450,1200,925,1350,1200,170,1150,1600,1750,1900,1750,1200,null,1000,1550,2000,1310.64,1524,1200,1775,null,1750,1754,1500,null,1800,1524,1219.2,1550,1750,null,1750,1575,1800,1300,1100,1200,1750,1680,1700,1800,1100,1310.64,2000,1350,1500,null,1300,1400,null,1775,1200,null,900,null,1800,1500,null,1500,null,442,1800,1700,1275,1050,1493.52,1386.84,1000,1200,2560,1500,1099.4136,1400,1775,1775,1800,442,1620,1600,1219.2,1700,null,1450,1170,1400,1700,1700,null,1700,1116.7872,1565,3280,1775,1000,1150,1850,1606.5,1400,1530,null,250.5,1038.5,1310.64,1500,1750,null,1600,null,442,968,null,1775,1550,null,1480,1800,null,1800,1500,1706.88,1600,1219.2,1219.2,1480,1450,1775,1550,1260,1700,1200,null,1650,1700,null,890,1300,1350,934,1200,442,null,null,null,null,1775,950,1550,900,1500,1400,2527,null,1850,1500,1200,1,525,1676.5,1200,1300,1219.2,1260,800,1750,1310.64,1218,1300,1250,1499.9208,null,null,1800,890,442,750,null,1650,442,1400,853.44,1775,1550,1750,1750,null,700,1300,1600,1600,null,890,1700,1400,1250,934,1200,1350,800,1625,1356.6648,1750,1900,1310.64,1310.64,1750,1450,1310.64,1100,1400,1524,null,890,1128.3696,null,1100,1775,1200,1850,1800,1600,1550,1550,1000,1775,1000,2136,1100,1799,null,1850,1000,1219.2,1775,1400,1500,1600,null,1850,1400,1650,1350,1750,1750,1170,940,1400,1524,1775,1402.08,null,1600,439,1700,442,1850,null,1800,1200,1330,442,null,1600,1813,1219.2,1500,1310.64,null,1450,null,null,null,1650,null,null,1227,1200,1650,1700,1100,1300,null,1200,null,1280.16,1000,1310.64,null,1880,1750,null,null,1600,1900,null,2100,null,null,442,1261,1000,800,1483,1500,1750,1300,null,null,1000,1310.64,1200,175,1775,1700,1880,1800,890,1901,168,null,1550,1500,1450,1200,1600,1350,1500,1650,250.5,800,1653,1775,1800,null,1450,1350,1524,null,1800,1310.64,1500,532,1089,1775,700,1750,1380,1000,950,1402.08,1000,900,1200,1799,null,905,1,750,null,1200,1300,null,1300,null,1400,null,null,1880,1350,null,890,894,872,1473,1645,442,1550,1550,1371.6,1500,1000,1200,1800,853.44,1500,1200,1250,1775,1750,1000,1000,1775,750,1200,1200,null,1625,1750,1371.6,1775,null,null,null,1800,null,null,890,1350,1500,350,2000,775,1200,1600,1059,1300,11000,1650,1400,1500,1500,null,1900,1750,1706.88,1450,1248,1040,1400,null,1450,null,1754,1700,905,1250,1900,1040,1219.2,900,1600,1200,1500,1800,1775,1400,1550,1250,1310.64,1380,1200,1100,1800,1700,1219.2,1219.2,1500,157.8864,650,1250,1850,1400,905,1100,1500,1775,1442,1524,165,null,null,1300,1550,1200,1200,1625,1775,null,1100,null,890,934,1300,1200,1300,null,1,null,1700,1550,1200,1296,1650,1240,1500,1800,null,1500,null,1100,950,3850,null,1400,1800,null,1219.2,1050,null,200,null,1250,800,1450,1317,1650,1300,null,null,1750,1750,1750,1250,1150,1775,975,890,1250,1400,1219.2,800,1450,1600,null,1600,1260,1310.64,1750,1310.64,1679,1100,1650,null,1250,1775,null,1600,1500,1700,1700,157.8864,null,1600,1600,null,2285,1,1400,1296,1000,null,1260,1170,null,1775,1560,1400,1300,1170,1300,1350,1150,1250,1450,442,null,1750,1750,1396,982,null,934,1850,1550,1580,1268,null,1676.4,1450,1100,1524,null,1300,200,600,1310.64,1750,1300,null,1752.6,441,1170,1310.64,1100,1300,950,442,1100,null,1450,1,1500,1350,1180,1100,650,1338,null,533,1390.8024,1170,1250,null,1100,900,1750,1775,null,null,934,1500,1000,1650,1600,1,800,1350,1500,null,1700,1100,1400,1200,800,1750,1144,1350,1000,1200,1800,1300,null,894,1,1300,1500,1600,null,13,null,1300,1800,1250,1040,1250,null,1600,1600,1600,944,1650,1250,1350,2500,600,800,1300,1400,1900,650,1038.5,940,1000,1050,null,950,1402.08,1901,1219.2,1400,1020,1250,1550,1877,null,1250,null,1000,1300,981,690,1650,1000,1100,1600,157.8864,1900,973,1250,3280,1,1,4001,1425,1400,1300,700,1300,1556,1100,1350,1550,1775,null,1250,1310.64,1500,1250,925,1700,null,1700,1040,1600,null,774,1250,1100,1550,1650,1750,890,1700,1219.2,1450,1800,null,null,1,1500,1700,1260,null,1400,1850,null,150,750,1400,1752.6,1650,1400,1200,1400,940,null,1200,190164,800,13,1800,1100,850,1260,1310.64,1400,1600,1650,1499.9208,null,1600.2,1219.2,1100,1400,null,180,1219.2,1200,1599,1219.2,900,1200,825,600,1150,1600,1100,1000,1250,1100,1400,125,null,null,1100,1371.6,1100,1400,110,1422,1100,1550,1550,null,1310.64,763,1100,1750,1880,null,null,1500,1130,1100,1350,1200,1400,1200,1450,1800,1000,1100,680,1,1100,1400,1700,1700,650,1524,1500,1200,1050,1200,1300,1450,1450,1200,1550,995,1300,null,1800,1450,1000,null,null,695,1100,1706.88,1456,1500,853.44,1650,1300,1642,1200,null,null,1450,null,3280,1600,1219.2,758,1350,null,1525,1700,1100,800,950,1100,200,1901,1600,1100,1066.8,null,1700,1200,550,1100,1050,1524,900,688,300,1186,null,1300,1200,1210,1100,100,null,1800,null,3825,1706.88,110000,1450,1680,1350,1450,1300,1200,1000,null,null,1350,1500,185,995,1200,1550,1550,null,null,null,null,null,1400,1200,1400,1383.792,null,null,50,1500,1650,280,1250,3800,1219.2,1250,null,1859.28,1450,1450,600,1450,1700,600,1050,1550,1700,1700,null,600,1310.64,940,null,null,995,1400,1600,914.4,4287,900,null,null,700,1400,808,1550,1187.5,1400,1310.64,1250,1550,1000,1310.64,null,1100,850,null,200,150,250,1300,1300,1250,3845,1400,250,800,1250,1100,null,null,null,1300,1100,1100,1100,1250,1250,null,1500,1700,1250,1300,null,190164,1000,600,800,null,1100,1400,1022,1300,1450,1050,null,1100,1219.2,1250,800,1310.64,1400,975,1264,null,1250,1550,1800,1325.88,1050,700,1550,1550,1100,1219.2,1219.2,800,200,1200,950,750,null,850,1000,1219.2,1650,1320,1550,null,1550,1450,1200,1700,853.44,1500,1100,1200,null,1219.2,1350,1400,1300,1550,12,1300,1400,1100,null,1310.64,1320,1250,1350,1850,1150,null,null,1219.2,800,1400,1300,null,1600,1400,1200,null,1500,null,1219.2,1310.64,1300,null,null,null,1300,1050,650,1350,null,1219.2,1200,1310.64,850,null,1200,1248,null,1000,null,1310.64,775,null,1300,1310.64,890,1219.2,1500,825,null,1200,1200,null,1200,null,1100,1310.64,null,null,null,1400,3500,1250,1350,1000,null,1310.64,null,1100,1200,1100,1280,850,1500,1250,null,null,1700,null,1310.64,1140,1200,1250,null,null,1350,1200,null,null,1020,1200,800,1800,1000,null,1450,1450,1450,900,350,1100,1417.32,1400],["m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","ft","ft","m","m","m","m","m","ft","m","m","m","m","ft","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","ft","m","ft","m","m","m","m","m","m","m","m","ft","ft","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","ft","m","m","m","m","m","m","m","m","ft","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","ft","ft","m","m","m","m","ft","m","m","m","m","m","m","m","ft","m","ft","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","ft","m","ft","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","ft","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","ft","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","ft","m","m","ft","ft","m","m","ft","m","m","ft","ft","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","ft","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","ft","ft","m","m","ft","m","m","m","m","m","m","m","m","m","m","ft","m","m","ft","m","ft","ft","m","m","ft","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","ft","m","ft","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","ft","m","ft","m","ft","ft","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","ft","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","ft","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","ft","ft","m","ft","m","m","m","m","m","m","m","m","m","ft","m","ft","ft","m","m","m","m","m","m","ft","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","ft","m","ft","m","m","m","m","m","m","ft","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","ft","m","m","m","m","ft","m","m","m","ft","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","ft","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","ft","m","m","m","ft","m","ft","ft","m","m","m","m","ft","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","ft","m","m","m","m","m","m","m","m","ft","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","ft","m","m","ft","m","m","m","m","ft","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","ft","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","ft","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","ft","m","m","m","m","m","m","m","ft","m","ft","ft","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","ft","m","m","m","m","ft","m","m","ft","m","m","m","m","m","m","m","ft","m","m","m","ft","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","ft","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","m","ft","m","m","ft","m","m","m","m","m","m","m","ft","m","m","m","m","m","ft","ft","m","m","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","ft","m","m","m","m","ft","m","m","m","m","m","m","m","m","ft","ft","m","m","m","m","m","m","m","ft","m","m","m","ft","m","m","m","m","m","ft","ft","ft","m","m","ft","ft","m","m","m","m","ft","ft","m","ft","m","m","m","m","m","m","m","ft","m","ft","m","ft","m","ft","m","m","ft","m","m","m","m","m","m","ft","m","ft","ft","m","m","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","ft","ft","m","m","m","ft","m","m","m","m","ft","m","m","m","m","m","m","m","m","m","m","m","m","ft","m"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>altitude<\/th>\n      <th>altitude_low_meters<\/th>\n      <th>altitude_high_meters<\/th>\n      <th>altitude_mean_meters<\/th>\n      <th>unit_of_measurement<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>coffee_c</span> <span class='op'>&lt;-</span> 
  <span class='va'>coffee_b</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='va'>altitude_low_meters</span>, 
         <span class='op'>-</span><span class='va'>altitude_high_meters</span>, <span class='op'>-</span><span class='va'>harvest_year</span>,
         <span class='op'>-</span><span class='va'>altitude</span>, <span class='op'>-</span><span class='va'>unit_of_measurement</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='co'># remove obvious outliers</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>altitude_mean_meters</span> <span class='op'>&lt;</span> <span class='fl'>5000</span> <span class='op'>&amp;</span> <span class='va'>altitude_mean_meters</span> <span class='op'>&gt;</span> <span class='fl'>50</span><span class='op'>)</span>

<span class='va'>coffee_c</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>altitude_mean_meters</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_boxplot</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-10-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>skim</span><span class='op'>(</span><span class='va'>coffee_c</span><span class='op'>)</span>
</code></pre>
</div>
<table>
<caption><span id="tab:unnamed-chunk-10">Table 2: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">coffee_c</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1054</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Date</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">11</td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">17</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">min</th>
<th style="text-align: left;">max</th>
<th style="text-align: left;">median</th>
<th style="text-align: right;">n_unique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">grading_date</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">2010-04-09</td>
<td style="text-align: left;">2018-01-19</td>
<td style="text-align: left;">2014-04-30</td>
<td style="text-align: right;">456</td>
</tr>
<tr class="even">
<td style="text-align: left;">expiration</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">2011-04-09</td>
<td style="text-align: left;">2019-01-19</td>
<td style="text-align: left;">2015-04-30</td>
<td style="text-align: right;">456</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">species</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Ara: 1054</td>
</tr>
<tr class="even">
<td style="text-align: left;">owner</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">277</td>
<td style="text-align: left;">jua: 133, exp: 53, cqi: 41, ipa: 39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">country_of_origin</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">35</td>
<td style="text-align: left;">Mex: 230, Gua: 154, Col: 145, Bra: 91</td>
</tr>
<tr class="even">
<td style="text-align: left;">company</td>
<td style="text-align: right;">141</td>
<td style="text-align: right;">0.87</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">244</td>
<td style="text-align: left;">une: 71, exp: 39, ipa: 39, rac: 26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">region</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">322</td>
<td style="text-align: left;">hui: 91, ori: 65, sou: 55, ver: 31</td>
</tr>
<tr class="even">
<td style="text-align: left;">in_country_partner</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">AME: 203, Spe: 173, Alm: 144, Aso: 133</td>
</tr>
<tr class="odd">
<td style="text-align: left;">variety</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">0.92</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">27</td>
<td style="text-align: left;">Cat: 234, Typ: 207, Bou: 205, Oth: 98</td>
</tr>
<tr class="even">
<td style="text-align: left;">processing_method</td>
<td style="text-align: right;">69</td>
<td style="text-align: right;">0.93</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">Was: 731, Nat: 167, Sem: 52, Oth: 25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">color</td>
<td style="text-align: right;">129</td>
<td style="text-align: right;">0.88</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Gre: 732, Blu: 81, Blu: 68, Non: 44</td>
</tr>
<tr class="even">
<td style="text-align: left;">certification_body</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">19</td>
<td style="text-align: left;">AME: 203, Spe: 173, Alm: 144, Aso: 133</td>
</tr>
<tr class="odd">
<td style="text-align: left;">harvest_year_num</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">201: 292, 201: 216, 201: 171, 201: 128</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">total_cup_points</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">82.11</td>
<td style="text-align: right;">3.67</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">81.17</td>
<td style="text-align: right;">82.50</td>
<td style="text-align: right;">83.67</td>
<td style="text-align: right;">90.58</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">number_of_bags</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">156.21</td>
<td style="text-align: right;">128.55</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">18.00</td>
<td style="text-align: right;">200.00</td>
<td style="text-align: right;">275.00</td>
<td style="text-align: right;">1062.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">aroma</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.57</td>
<td style="text-align: right;">0.39</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.42</td>
<td style="text-align: right;">7.58</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">8.75</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">flavor</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.52</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">8.83</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">aftertaste</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.39</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.25</td>
<td style="text-align: right;">7.42</td>
<td style="text-align: right;">7.58</td>
<td style="text-align: right;">8.67</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">acidity</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.53</td>
<td style="text-align: right;">0.39</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">8.75</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">body</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">0.36</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.67</td>
<td style="text-align: right;">8.58</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">balance</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">0.42</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.67</td>
<td style="text-align: right;">8.75</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">uniformity</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.86</td>
<td style="text-align: right;">0.53</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">clean_cup</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.85</td>
<td style="text-align: right;">0.80</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">sweetness</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.92</td>
<td style="text-align: right;">0.52</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">cupper_points</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.48</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7.25</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">moisture</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: right;">0.20</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">category_one_defects</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.38</td>
<td style="text-align: right;">1.88</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">31.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">quakers</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.14</td>
<td style="text-align: right;">0.72</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">11.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">category_two_defects</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.59</td>
<td style="text-align: right;">5.25</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">47.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">altitude_mean_meters</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1347.24</td>
<td style="text-align: right;">448.25</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">1100.00</td>
<td style="text-align: right;">1320.00</td>
<td style="text-align: right;">1600.00</td>
<td style="text-align: right;">4287.00</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>plot_boxplot</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>df</span>, <span class='va'>col</span><span class='op'>)</span><span class='op'>{</span>
  <span class='op'>{</span><span class='op'>{</span><span class='va'>df</span><span class='op'>}</span><span class='op'>}</span> <span class='op'>%&gt;%</span> 
    <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='op'>{</span><span class='op'>{</span><span class='va'>col</span><span class='op'>}</span><span class='op'>}</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>geom_boxplot</span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='fu'>plot_boxplot</span><span class='op'>(</span><span class='va'>coffee_c</span>, <span class='va'>total_cup_points</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-10-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># remove the sample with cup points = 0</span>
<span class='va'>coffee_c</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>total_cup_points</span> <span class='op'>==</span> <span class='fl'>0</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1  30
  total_cup_points species owner       country_of_orig company region
             &lt;dbl&gt; &lt;fct&gt;   &lt;fct&gt;       &lt;fct&gt;            &lt;fct&gt;   &lt;fct&gt; 
1                0 Arabica bismarck c Honduras         cigrah comay
#  with 24 more variables: number_of_bags &lt;dbl&gt;,
#   in_country_partner &lt;fct&gt;, grading_date &lt;date&gt;, variety &lt;fct&gt;,
#   processing_method &lt;fct&gt;, aroma &lt;dbl&gt;, flavor &lt;dbl&gt;,
#   aftertaste &lt;dbl&gt;, acidity &lt;dbl&gt;, body &lt;dbl&gt;, balance &lt;dbl&gt;,
#   uniformity &lt;dbl&gt;, clean_cup &lt;dbl&gt;, sweetness &lt;dbl&gt;,
#   cupper_points &lt;dbl&gt;, moisture &lt;dbl&gt;, category_one_defects &lt;dbl&gt;,
#   quakers &lt;dbl&gt;, color &lt;fct&gt;, category_two_defects &lt;dbl&gt;, </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>coffee_d</span> <span class='op'>&lt;-</span> 
  <span class='va'>coffee_c</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>total_cup_points</span> <span class='op'>!=</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='va'>grading_date</span>, <span class='op'>-</span><span class='va'>expiration</span>,
         <span class='op'>-</span><span class='va'>owner</span>, <span class='op'>-</span><span class='va'>company</span>, <span class='op'>-</span><span class='va'>region</span>, <span class='op'>-</span><span class='va'>species</span><span class='op'>)</span>

<span class='fu'>skim</span><span class='op'>(</span><span class='va'>coffee_d</span><span class='op'>)</span>
</code></pre>
</div>
<table>
<caption><span id="tab:unnamed-chunk-11">Table 3: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">coffee_d</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1053</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">24</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">17</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">country_of_origin</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">35</td>
<td style="text-align: left;">Mex: 230, Gua: 154, Col: 145, Bra: 91</td>
</tr>
<tr class="even">
<td style="text-align: left;">in_country_partner</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">AME: 203, Spe: 173, Alm: 144, Aso: 133</td>
</tr>
<tr class="odd">
<td style="text-align: left;">variety</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">0.92</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">27</td>
<td style="text-align: left;">Cat: 233, Typ: 207, Bou: 205, Oth: 98</td>
</tr>
<tr class="even">
<td style="text-align: left;">processing_method</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">0.94</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">Was: 731, Nat: 167, Sem: 52, Oth: 25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">color</td>
<td style="text-align: right;">129</td>
<td style="text-align: right;">0.88</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Gre: 731, Blu: 81, Blu: 68, Non: 44</td>
</tr>
<tr class="even">
<td style="text-align: left;">certification_body</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">19</td>
<td style="text-align: left;">AME: 203, Spe: 173, Alm: 144, Aso: 133</td>
</tr>
<tr class="odd">
<td style="text-align: left;">harvest_year_num</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">201: 292, 201: 216, 201: 171, 201: 128</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col style="width: 20%" />
<col style="width: 9%" />
<col style="width: 13%" />
<col style="width: 7%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">total_cup_points</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">82.19</td>
<td style="text-align: right;">2.66</td>
<td style="text-align: right;">59.83</td>
<td style="text-align: right;">81.17</td>
<td style="text-align: right;">82.50</td>
<td style="text-align: right;">83.67</td>
<td style="text-align: right;">90.58</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">number_of_bags</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">156.10</td>
<td style="text-align: right;">128.56</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">18.00</td>
<td style="text-align: right;">200.00</td>
<td style="text-align: right;">275.00</td>
<td style="text-align: right;">1062.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">aroma</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.58</td>
<td style="text-align: right;">0.31</td>
<td style="text-align: right;">5.08</td>
<td style="text-align: right;">7.42</td>
<td style="text-align: right;">7.58</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">8.75</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">flavor</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.52</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">6.17</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">8.83</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">aftertaste</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.40</td>
<td style="text-align: right;">0.34</td>
<td style="text-align: right;">6.17</td>
<td style="text-align: right;">7.25</td>
<td style="text-align: right;">7.42</td>
<td style="text-align: right;">7.58</td>
<td style="text-align: right;">8.67</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">acidity</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.53</td>
<td style="text-align: right;">0.31</td>
<td style="text-align: right;">5.25</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">8.75</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">body</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.51</td>
<td style="text-align: right;">0.28</td>
<td style="text-align: right;">6.33</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.67</td>
<td style="text-align: right;">8.58</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">balance</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.51</td>
<td style="text-align: right;">0.35</td>
<td style="text-align: right;">6.08</td>
<td style="text-align: right;">7.33</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.67</td>
<td style="text-align: right;">8.75</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">uniformity</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.87</td>
<td style="text-align: right;">0.44</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">clean_cup</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.85</td>
<td style="text-align: right;">0.74</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">sweetness</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.93</td>
<td style="text-align: right;">0.42</td>
<td style="text-align: right;">1.33</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">cupper_points</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.48</td>
<td style="text-align: right;">0.41</td>
<td style="text-align: right;">5.17</td>
<td style="text-align: right;">7.25</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">7.75</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">moisture</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: right;">0.20</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">category_one_defects</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.38</td>
<td style="text-align: right;">1.88</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">31.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">quakers</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.14</td>
<td style="text-align: right;">0.72</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">11.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">category_two_defects</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.59</td>
<td style="text-align: right;">5.25</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">47.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">altitude_mean_meters</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1347.19</td>
<td style="text-align: right;">448.46</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: right;">1100.00</td>
<td style="text-align: right;">1320.00</td>
<td style="text-align: right;">1600.00</td>
<td style="text-align: right;">4287.00</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_boxplot</span><span class='op'>(</span><span class='va'>coffee_d</span>, <span class='va'>total_cup_points</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_boxplot</span><span class='op'>(</span><span class='va'>coffee_d</span>, <span class='va'>number_of_bags</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_boxplot</span><span class='op'>(</span><span class='va'>coffee_d</span>, <span class='va'>moisture</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_boxplot</span><span class='op'>(</span><span class='va'>coffee_d</span>, <span class='va'>category_one_defects</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-4.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_boxplot</span><span class='op'>(</span><span class='va'>coffee_d</span>, <span class='va'>quakers</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-5.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_boxplot</span><span class='op'>(</span><span class='va'>coffee_d</span>, <span class='va'>category_two_defects</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-11-6.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Univariate factor variables</span>

<span class='va'>coffee_d</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>quakers</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_bar</span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"count"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>plot_bar</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>col</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>coffee_d</span> <span class='op'>%&gt;%</span> 
    <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='op'>{</span><span class='op'>{</span><span class='va'>col</span><span class='op'>}</span><span class='op'>}</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>geom_bar</span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"count"</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>ggtitle</span><span class='op'>(</span><span class='fu'>enquo</span><span class='op'>(</span><span class='va'>col</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='fu'>plot_bar</span><span class='op'>(</span><span class='va'>quakers</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_bar</span><span class='op'>(</span><span class='va'>category_one_defects</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_bar</span><span class='op'>(</span><span class='va'>category_two_defects</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-4.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>coffee_d</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>total_cup_points</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_histogram</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-5.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>plot_hist</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>df</span>, <span class='va'>col</span><span class='op'>)</span><span class='op'>{</span>
  
  <span class='op'>{</span><span class='op'>{</span><span class='va'>df</span><span class='op'>}</span><span class='op'>}</span> <span class='op'>%&gt;%</span> 
    <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='op'>{</span><span class='op'>{</span><span class='va'>col</span><span class='op'>}</span><span class='op'>}</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>geom_histogram</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>ggtitle</span><span class='op'>(</span><span class='fu'>enquo</span><span class='op'>(</span><span class='va'>col</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>


<span class='fu'>plot_hist</span><span class='op'>(</span><span class='va'>coffee_d</span>, <span class='va'>total_cup_points</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-6.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_hist</span><span class='op'>(</span><span class='va'>coffee_d</span>, <span class='va'>altitude_mean_meters</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-12-7.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>coffee_d</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>altitude_mean_meters</span>,
             y <span class='op'>=</span> <span class='va'>total_cup_points</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_smooth</span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span>, se <span class='op'>=</span> <span class='cn'>F</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_smooth</span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span>, formula <span class='op'>=</span> <span class='va'>y</span> <span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/stats/poly.html'>poly</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='fl'>2</span><span class='op'>)</span>,
              se <span class='op'>=</span> <span class='cn'>F</span>,
              col <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-13-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>coffee_d</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>moisture</span>,
             y <span class='op'>=</span> <span class='va'>total_cup_points</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-14-1.png" width="624" /></p>
</div>
<p>Dataset to be used for modelling:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>coffee_cleaned</span> <span class='op'>&lt;-</span> <span class='va'>coffee_d</span> <span class='op'>%&gt;%</span> 
  <span class='co'># mutate(log10_points = log10(total_cup_points)) %&gt;% </span>
  <span class='fu'>mutate</span><span class='op'>(</span>variety <span class='op'>=</span> <span class='fu'>fct_explicit_na</span><span class='op'>(</span><span class='va'>variety</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  
  <span class='fu'>mutate</span><span class='op'>(</span>processing_method <span class='op'>=</span> <span class='fu'>fct_explicit_na</span><span class='op'>(</span><span class='va'>processing_method</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  
  <span class='fu'>mutate</span><span class='op'>(</span>color <span class='op'>=</span> <span class='fu'>na_if</span><span class='op'>(</span><span class='va'>color</span>, <span class='st'>"None"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>color <span class='op'>=</span> <span class='fu'>fct_explicit_na</span><span class='op'>(</span><span class='va'>color</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>total_cup_points</span>,
         <span class='va'>country_of_origin</span>,
         <span class='va'>in_country_partner</span>,
         <span class='va'>variety</span>,
         <span class='va'>processing_method</span>,
         <span class='va'>color</span>,
         <span class='va'>certification_body</span>,
         <span class='va'>harvest_year_num</span>,
         <span class='va'>moisture</span>,
         <span class='va'>category_one_defects</span>,
         <span class='va'>category_two_defects</span>,
         <span class='va'>quakers</span>,
         <span class='va'>altitude_mean_meters</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># plot variety by total cup points</span>
<span class='va'>coffee_cleaned</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='fu'>fct_reorder</span><span class='op'>(</span><span class='va'>variety</span>, <span class='va'>total_cup_points</span><span class='op'>)</span>, 
             <span class='va'>total_cup_points</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_boxplot</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>coord_flip</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create function</span>
<span class='va'>plot_ordered_boxplot</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>df</span>, <span class='va'>col</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>df</span> <span class='op'>%&gt;%</span> 
    <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='fu'>fct_reorder</span><span class='op'>(</span><span class='op'>{</span><span class='op'>{</span><span class='va'>col</span><span class='op'>}</span><span class='op'>}</span>, <span class='va'>total_cup_points</span><span class='op'>)</span>, 
               <span class='va'>total_cup_points</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>geom_boxplot</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>coord_flip</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>ggtitle</span><span class='op'>(</span><span class='fu'>enquo</span><span class='op'>(</span><span class='va'>col</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>


<span class='fu'>plot_ordered_boxplot</span><span class='op'>(</span><span class='va'>coffee_cleaned</span>, <span class='va'>country_of_origin</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_ordered_boxplot</span><span class='op'>(</span><span class='va'>coffee_cleaned</span>, <span class='va'>in_country_partner</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_ordered_boxplot</span><span class='op'>(</span><span class='va'>coffee_cleaned</span>, <span class='va'>variety</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-4.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_ordered_boxplot</span><span class='op'>(</span><span class='va'>coffee_cleaned</span>, <span class='va'>processing_method</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-5.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_ordered_boxplot</span><span class='op'>(</span><span class='va'>coffee_cleaned</span>, <span class='va'>color</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-6.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_ordered_boxplot</span><span class='op'>(</span><span class='va'>coffee_cleaned</span>, <span class='va'>certification_body</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-16-7.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># ggpairs-----</span>
<span class='va'>coffee_cleaned</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='fu'>where</span><span class='op'>(</span><span class='va'>is.numeric</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggpairs</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-17-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>skim</span><span class='op'>(</span><span class='va'>coffee_cleaned</span><span class='op'>)</span>
</code></pre>
</div>
<table>
<caption><span id="tab:unnamed-chunk-17">Table 4: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">coffee_cleaned</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1053</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">country_of_origin</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">35</td>
<td style="text-align: left;">Mex: 230, Gua: 154, Col: 145, Bra: 91</td>
</tr>
<tr class="even">
<td style="text-align: left;">in_country_partner</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">AME: 203, Spe: 173, Alm: 144, Aso: 133</td>
</tr>
<tr class="odd">
<td style="text-align: left;">variety</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">28</td>
<td style="text-align: left;">Cat: 233, Typ: 207, Bou: 205, Oth: 98</td>
</tr>
<tr class="even">
<td style="text-align: left;">processing_method</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">Was: 731, Nat: 167, (Mi: 68, Sem: 52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">color</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Gre: 731, (Mi: 173, Blu: 81, Blu: 68</td>
</tr>
<tr class="even">
<td style="text-align: left;">certification_body</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">19</td>
<td style="text-align: left;">AME: 203, Spe: 173, Alm: 144, Aso: 133</td>
</tr>
<tr class="odd">
<td style="text-align: left;">harvest_year_num</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">201: 292, 201: 216, 201: 171, 201: 128</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col style="width: 20%" />
<col style="width: 9%" />
<col style="width: 13%" />
<col style="width: 7%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">total_cup_points</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">82.19</td>
<td style="text-align: right;">2.66</td>
<td style="text-align: right;">59.83</td>
<td style="text-align: right;">81.17</td>
<td style="text-align: right;">82.50</td>
<td style="text-align: right;">83.67</td>
<td style="text-align: right;">90.58</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">moisture</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: right;">0.20</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">category_one_defects</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.38</td>
<td style="text-align: right;">1.88</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">31.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">category_two_defects</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.59</td>
<td style="text-align: right;">5.25</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">47.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">quakers</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.14</td>
<td style="text-align: right;">0.72</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">11.00</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">altitude_mean_meters</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1347.19</td>
<td style="text-align: right;">448.46</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: right;">1100.00</td>
<td style="text-align: right;">1320.00</td>
<td style="text-align: right;">1600.00</td>
<td style="text-align: right;">4287.00</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
<h1 id="tidymodels">Tidymodels</h1>
<p>I will only be using random forest to model, and the preprocessing recipe is quite simple as random forest is insensitive to skewed distributions. However, missing values must be imputed.</p>
<h2 id="split">Split</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>22071301</span><span class='op'>)</span>
<span class='va'>coffee_split</span> <span class='op'>&lt;-</span> 
  <span class='va'>coffee_cleaned</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>initial_split</span><span class='op'>(</span><span class='op'>)</span>


<span class='va'>coffee_train</span> <span class='op'>&lt;-</span> 
  <span class='va'>coffee_split</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>training</span><span class='op'>(</span><span class='op'>)</span>


<span class='va'>coffee_test</span> <span class='op'>&lt;-</span> 
  <span class='va'>coffee_split</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>testing</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="preprocess">Preprocess</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>recipe_rf</span> <span class='op'>&lt;-</span> 
  <span class='fu'>recipe</span><span class='op'>(</span><span class='va'>total_cup_points</span> <span class='op'>~</span><span class='va'>.</span>,
         data <span class='op'>=</span> <span class='va'>coffee_train</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>step_impute_knn</span><span class='op'>(</span><span class='fu'>all_predictors</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>step_poly</span><span class='op'>(</span><span class='va'>altitude_mean_meters</span>, degree <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="fit">Fit</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>RF</span> <span class='op'>&lt;-</span> 
  <span class='fu'>rand_forest</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>set_args</span><span class='op'>(</span>mtry <span class='op'>=</span> <span class='fu'>tune</span><span class='op'>(</span><span class='op'>)</span>,
           min_n <span class='op'>=</span> <span class='fu'>tune</span><span class='op'>(</span><span class='op'>)</span>,
           trees <span class='op'>=</span> <span class='fl'>1000</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>set_engine</span><span class='op'>(</span><span class='st'>"ranger"</span>,
             importance <span class='op'>=</span> <span class='st'>"permutation"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>set_mode</span><span class='op'>(</span><span class='st'>"regression"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="tune">Tune</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>workflow_rf</span> <span class='op'>&lt;-</span> 
  <span class='fu'>workflow</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>add_recipe</span><span class='op'>(</span><span class='va'>recipe_rf</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>add_model</span><span class='op'>(</span><span class='va'>RF</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="cross-validate">Cross-validate</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>22071302</span><span class='op'>)</span>
<span class='va'>CV</span> <span class='op'>&lt;-</span> 
  <span class='va'>coffee_train</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>vfold_cv</span><span class='op'>(</span>v<span class='op'>=</span><span class='fl'>10</span><span class='op'>)</span>

<span class='va'>tuned_rf</span> <span class='op'>&lt;-</span> 
  <span class='va'>workflow_rf</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>tune_grid</span><span class='op'>(</span>resamples <span class='op'>=</span> <span class='va'>CV</span><span class='op'>)</span>

<span class='va'>tuned_rf</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>autoplot</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-22-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>parameters_tuned_rf</span> <span class='op'>&lt;-</span> 
  <span class='va'>tuned_rf</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select_best</span><span class='op'>(</span>metric <span class='op'>=</span> <span class='st'>"rmse"</span><span class='op'>)</span>

<span class='va'>best_workflow_rf</span> <span class='op'>&lt;-</span> 
  <span class='va'>workflow_rf</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>finalize_workflow</span><span class='op'>(</span><span class='va'>parameters_tuned_rf</span><span class='op'>)</span>

<span class='va'>fit_rf</span> <span class='op'>&lt;-</span> 
  <span class='va'>best_workflow_rf</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>last_fit</span><span class='op'>(</span><span class='va'>coffee_split</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="assess-model">Assess model</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>model_performance_rf</span> <span class='op'>&lt;-</span> 
  <span class='va'>fit_rf</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>collect_metrics</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>model_performance_rf</span> <span class='co'># rmse = 2.07, r-sq = 0.267</span>
</code></pre>
</div>
<pre><code># A tibble: 2  4
  .metric .estimator .estimate .config             
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 rmse    standard       2.06  Preprocessor1_Model1
2 rsq     standard       0.269 Preprocessor1_Model1</code></pre>
</div>
<h2 id="assess-predictions">Assess predictions</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>predictions_rf</span> <span class='op'>&lt;-</span> 
  <span class='va'>fit_rf</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>collect_predictions</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>predictions_plot</span> <span class='op'>&lt;-</span> <span class='va'>predictions_rf</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>total_cup_points</span>,
             y <span class='op'>=</span> <span class='va'>.pred</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_point</span><span class='op'>(</span>color <span class='op'>=</span> <span class='st'>"midnightblue"</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_abline</span><span class='op'>(</span>color <span class='op'>=</span> <span class='st'>"red"</span>,
              lty <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>x <span class='op'>=</span> <span class='st'>"Actual Total Cupping Points"</span>,
       y <span class='op'>=</span> <span class='st'>"Predicted Total Cupping Points"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tune</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/tune/man/coord_obs_pred.html'>coord_obs_pred</a></span><span class='op'>(</span><span class='op'>)</span>



<span class='fu'>plotly</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/plotly/man/ggplotly.html'>ggplotly</a></span><span class='op'>(</span><span class='va'>predictions_plot</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-8a3c15e6a977f72dd247" style="width:624px;height:384px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-8a3c15e6a977f72dd247">{"x":{"data":[{"x":[88.25,87.92,87.58,87.25,87.08,86,85.42,85.42,85.08,85,84.92,84.92,84.83,84.83,84.75,84.67,84.67,84.67,84.67,84.67,84.58,84.58,84.58,84.5,84.5,84.42,84.42,84.33,84.33,84.33,84.33,84.25,84.25,84.17,84.17,84.17,84.17,84.17,84.08,84.08,84,84,84,84,83.92,83.92,83.83,83.83,83.83,83.75,83.75,83.75,83.75,83.67,83.67,83.67,83.67,83.67,83.58,83.58,83.58,83.5,83.5,83.5,83.5,83.5,83.5,83.5,83.42,83.42,83.42,83.42,83.33,83.33,83.25,83.25,83.25,83.25,83.25,83.25,83.17,83.17,83.17,83.17,83.17,83.17,83.17,83.17,83.17,83.17,83.17,83.17,83,83,83,83,83,83,83,83,83,82.92,82.92,82.92,82.92,82.83,82.83,82.83,82.83,82.83,82.75,82.75,82.75,82.75,82.75,82.75,82.75,82.75,82.67,82.67,82.67,82.58,82.58,82.58,82.5,82.5,82.5,82.5,82.5,82.5,82.5,82.42,82.42,82.42,82.42,82.42,82.33,82.33,82.33,82.33,82.33,82.33,82.25,82.25,82.25,82.25,82.25,82.17,82.17,82.17,82.17,82.08,82.08,82.08,82.08,82.08,82,82,82,82,81.92,81.92,81.83,81.83,81.75,81.75,81.75,81.67,81.67,81.67,81.67,81.67,81.67,81.67,81.58,81.58,81.58,81.5,81.5,81.5,81.5,81.5,81.5,81.42,81.42,81.42,81.33,81.33,81.25,81.17,81.17,81.17,81.17,81.17,81.17,81.08,81.08,81.08,81,81,81,81,81,81,81,80.92,80.92,80.92,80.83,80.83,80.75,80.67,80.58,80.5,80.5,80.42,80.42,80.42,80.33,80.33,80.25,80.17,80.08,80.08,80.08,80.08,80.08,80,79.92,79.92,79.83,79.83,79.83,79.75,79.75,79.75,79.75,79.75,79.67,79.58,79.5,79.25,79.17,79.17,79.17,79.08,79.08,79,79,78.58,78.33,78,78,78,77.92,77.42,77.17,76.42,76.17,75.17,74.33,71.08,69.17,68.33],"y":[84.935774357143,84.8550937273517,85.8299616321134,85.8646759654468,85.5591521737801,83.7658400656562,84.1337751428573,84.7162981428572,84.2158593335881,82.5046208888889,83.867707194472,82.5168760047132,82.6431306336441,83.8387599639804,75.1100069632035,84.4608786121727,81.9544160811855,82.9857045279485,82.0388277359051,83.7332965245309,82.9966916824335,82.6608074395391,83.5183954523809,83.512443072296,81.477649794725,83.8092662579366,83.5527050065935,83.2442545,81.3401826585564,82.7645915384615,81.6829046468254,84.0710579914939,82.382555564237,82.4393953412698,83.8268373916362,84.2093516309524,83.2533323550453,82.4192942619046,81.406454990476,83.3829105581907,84.4182693012821,83.6835873116882,83.1811973606671,83.4273459928834,81.5015911970865,77.5164774960317,82.054630294716,82.2228771071432,81.9089456184722,84.051961882895,83.5105661363647,83.314071565385,82.500860519522,82.1509850671419,83.7038235714285,82.0376209070741,79.5418417737795,83.0277251847315,83.9347847889541,82.8757927253578,82.9533202105688,83.359695726176,83.8225950238097,83.5776420304324,80.5736378739317,81.7900166450214,82.5491309047618,83.2013792241178,81.8959483853121,82.6604097619048,82.8834629554283,83.2175444149346,81.4504917251081,81.9089456184722,82.2761641071429,80.9946487403483,83.0451874862421,82.6098849740924,81.9520690254743,82.0758023429349,81.7449980586825,81.5790177611831,83.3548634305139,82.3488650253466,83.0123665945541,82.43254805772,82.2702306183261,82.2987800882633,81.0606238288448,79.8046008790687,81.199771437096,81.6240385718732,83.2127742923466,82.6409155691253,82.9242144880952,82.7621026862027,82.5902283333333,82.5389457958149,82.7611015277779,83.2642783774845,79.6183212434326,82.6844873571429,82.9767223914755,82.0193728296262,81.3348797285714,82.7464896078644,82.3095538333332,82.9026265388396,82.5594512623715,81.1115347888501,81.824790070743,81.579577563492,84.1720253074982,82.2078273180753,83.508105530886,81.0158495043464,81.6538958228968,80.827285863492,82.7707123881952,81.9886259368295,82.0368112596017,81.6192676402318,81.3016059016107,82.1430368067709,82.623550642857,81.4908079513947,83.0696051424966,83.3098682731862,80.4187327546248,82.2348735680875,82.6946258492064,84.1454275852759,81.1658196570168,80.4528246245346,82.0090386171765,80.8124148181923,82.7798149896481,83.508105530886,82.9203306736829,81.0143970108923,79.8104566623072,83.3435517756132,83.5396271872294,81.9238834421282,81.725556455232,81.0073960656282,83.5454344080259,83.1550968796481,80.5228997352094,83.2352112378189,82.2466818992119,82.5814142938711,84.6767714523813,82.2568906709956,80.2447756332079,82.667264442857,82.0864807380952,82.281052175158,80.540129901857,83.06484504304,82.433046241591,80.8101830034417,83.2748835674604,82.6796268074258,82.1043252535755,82.6536829049656,81.2286871746159,83.2916980412211,82.4668100374802,83.3214573809524,82.1877815160026,83.2036127857145,81.0920808139028,81.9377205695044,82.4458837423688,82.1905905847985,81.9516714692619,81.404826202381,82.1888527909451,82.7870654761904,81.5867742049708,81.0898924507882,79.5253962936322,82.0311902240261,81.9088416500554,82.1494632260266,81.3044983571428,80.4049889264069,81.5665977855337,81.9779206363128,82.608017952381,82.1866610683113,80.817418377391,80.7081310656272,83.06484504304,81.1878043821136,81.0144966427049,81.7157408705271,82.3109450507936,82.5518077024728,82.1169868622709,82.0684846471861,82.1649726340422,82.4304575877667,80.8938003544733,81.3106424999999,81.3987046019806,81.3846675671518,82.4688337766574,81.1739117641508,82.5065090766594,81.3173607845644,81.8853711493049,81.7257154166898,82.119601845238,82.351566015873,83.7144567254903,80.1158782134532,82.0473240355571,81.6875689520047,81.3931755968063,82.7595274999998,82.308490415862,81.7046955426697,81.3344183080745,81.3306517758948,79.5823646359418,81.3781711129572,81.7455258524373,82.086775992696,82.910078142857,81.7160809910119,81.4922139751081,81.1694927647907,82.5588695238094,81.381696648639,81.493515743327,80.2658159648447,80.4836588055749,79.0555760638527,81.0422499285714,81.4001866923167,82.257367305735,81.1661607424241,81.7766745017408,78.3333293002785,82.2270223885667,81.7514973061799,81.2641275155566,81.7514973061799,81.5456554613396,78.6972580490621,80.4639956666665,81.3401376914399,81.033685758322,78.1975882156984,80.387584851493,80.1179292568653,81.8044550238096,78.9122450700597,80.2095930058752,79.8062813173401,80.0528567279942,79.9333987489317],"text":["total_cup_points: 88.25<br />.pred: 84.93577","total_cup_points: 87.92<br />.pred: 84.85509","total_cup_points: 87.58<br />.pred: 85.82996","total_cup_points: 87.25<br />.pred: 85.86468","total_cup_points: 87.08<br />.pred: 85.55915","total_cup_points: 86.00<br />.pred: 83.76584","total_cup_points: 85.42<br />.pred: 84.13378","total_cup_points: 85.42<br />.pred: 84.71630","total_cup_points: 85.08<br />.pred: 84.21586","total_cup_points: 85.00<br />.pred: 82.50462","total_cup_points: 84.92<br />.pred: 83.86771","total_cup_points: 84.92<br />.pred: 82.51688","total_cup_points: 84.83<br />.pred: 82.64313","total_cup_points: 84.83<br />.pred: 83.83876","total_cup_points: 84.75<br />.pred: 75.11001","total_cup_points: 84.67<br />.pred: 84.46088","total_cup_points: 84.67<br />.pred: 81.95442","total_cup_points: 84.67<br />.pred: 82.98570","total_cup_points: 84.67<br />.pred: 82.03883","total_cup_points: 84.67<br />.pred: 83.73330","total_cup_points: 84.58<br />.pred: 82.99669","total_cup_points: 84.58<br />.pred: 82.66081","total_cup_points: 84.58<br />.pred: 83.51840","total_cup_points: 84.50<br />.pred: 83.51244","total_cup_points: 84.50<br />.pred: 81.47765","total_cup_points: 84.42<br />.pred: 83.80927","total_cup_points: 84.42<br />.pred: 83.55271","total_cup_points: 84.33<br />.pred: 83.24425","total_cup_points: 84.33<br />.pred: 81.34018","total_cup_points: 84.33<br />.pred: 82.76459","total_cup_points: 84.33<br />.pred: 81.68290","total_cup_points: 84.25<br />.pred: 84.07106","total_cup_points: 84.25<br />.pred: 82.38256","total_cup_points: 84.17<br />.pred: 82.43940","total_cup_points: 84.17<br />.pred: 83.82684","total_cup_points: 84.17<br />.pred: 84.20935","total_cup_points: 84.17<br />.pred: 83.25333","total_cup_points: 84.17<br />.pred: 82.41929","total_cup_points: 84.08<br />.pred: 81.40645","total_cup_points: 84.08<br />.pred: 83.38291","total_cup_points: 84.00<br />.pred: 84.41827","total_cup_points: 84.00<br />.pred: 83.68359","total_cup_points: 84.00<br />.pred: 83.18120","total_cup_points: 84.00<br />.pred: 83.42735","total_cup_points: 83.92<br />.pred: 81.50159","total_cup_points: 83.92<br />.pred: 77.51648","total_cup_points: 83.83<br />.pred: 82.05463","total_cup_points: 83.83<br />.pred: 82.22288","total_cup_points: 83.83<br />.pred: 81.90895","total_cup_points: 83.75<br />.pred: 84.05196","total_cup_points: 83.75<br />.pred: 83.51057","total_cup_points: 83.75<br />.pred: 83.31407","total_cup_points: 83.75<br />.pred: 82.50086","total_cup_points: 83.67<br />.pred: 82.15099","total_cup_points: 83.67<br />.pred: 83.70382","total_cup_points: 83.67<br />.pred: 82.03762","total_cup_points: 83.67<br />.pred: 79.54184","total_cup_points: 83.67<br />.pred: 83.02773","total_cup_points: 83.58<br />.pred: 83.93478","total_cup_points: 83.58<br />.pred: 82.87579","total_cup_points: 83.58<br />.pred: 82.95332","total_cup_points: 83.50<br />.pred: 83.35970","total_cup_points: 83.50<br />.pred: 83.82260","total_cup_points: 83.50<br />.pred: 83.57764","total_cup_points: 83.50<br />.pred: 80.57364","total_cup_points: 83.50<br />.pred: 81.79002","total_cup_points: 83.50<br />.pred: 82.54913","total_cup_points: 83.50<br />.pred: 83.20138","total_cup_points: 83.42<br />.pred: 81.89595","total_cup_points: 83.42<br />.pred: 82.66041","total_cup_points: 83.42<br />.pred: 82.88346","total_cup_points: 83.42<br />.pred: 83.21754","total_cup_points: 83.33<br />.pred: 81.45049","total_cup_points: 83.33<br />.pred: 81.90895","total_cup_points: 83.25<br />.pred: 82.27616","total_cup_points: 83.25<br />.pred: 80.99465","total_cup_points: 83.25<br />.pred: 83.04519","total_cup_points: 83.25<br />.pred: 82.60988","total_cup_points: 83.25<br />.pred: 81.95207","total_cup_points: 83.25<br />.pred: 82.07580","total_cup_points: 83.17<br />.pred: 81.74500","total_cup_points: 83.17<br />.pred: 81.57902","total_cup_points: 83.17<br />.pred: 83.35486","total_cup_points: 83.17<br />.pred: 82.34887","total_cup_points: 83.17<br />.pred: 83.01237","total_cup_points: 83.17<br />.pred: 82.43255","total_cup_points: 83.17<br />.pred: 82.27023","total_cup_points: 83.17<br />.pred: 82.29878","total_cup_points: 83.17<br />.pred: 81.06062","total_cup_points: 83.17<br />.pred: 79.80460","total_cup_points: 83.17<br />.pred: 81.19977","total_cup_points: 83.17<br />.pred: 81.62404","total_cup_points: 83.00<br />.pred: 83.21277","total_cup_points: 83.00<br />.pred: 82.64092","total_cup_points: 83.00<br />.pred: 82.92421","total_cup_points: 83.00<br />.pred: 82.76210","total_cup_points: 83.00<br />.pred: 82.59023","total_cup_points: 83.00<br />.pred: 82.53895","total_cup_points: 83.00<br />.pred: 82.76110","total_cup_points: 83.00<br />.pred: 83.26428","total_cup_points: 83.00<br />.pred: 79.61832","total_cup_points: 82.92<br />.pred: 82.68449","total_cup_points: 82.92<br />.pred: 82.97672","total_cup_points: 82.92<br />.pred: 82.01937","total_cup_points: 82.92<br />.pred: 81.33488","total_cup_points: 82.83<br />.pred: 82.74649","total_cup_points: 82.83<br />.pred: 82.30955","total_cup_points: 82.83<br />.pred: 82.90263","total_cup_points: 82.83<br />.pred: 82.55945","total_cup_points: 82.83<br />.pred: 81.11153","total_cup_points: 82.75<br />.pred: 81.82479","total_cup_points: 82.75<br />.pred: 81.57958","total_cup_points: 82.75<br />.pred: 84.17203","total_cup_points: 82.75<br />.pred: 82.20783","total_cup_points: 82.75<br />.pred: 83.50811","total_cup_points: 82.75<br />.pred: 81.01585","total_cup_points: 82.75<br />.pred: 81.65390","total_cup_points: 82.75<br />.pred: 80.82729","total_cup_points: 82.67<br />.pred: 82.77071","total_cup_points: 82.67<br />.pred: 81.98863","total_cup_points: 82.67<br />.pred: 82.03681","total_cup_points: 82.58<br />.pred: 81.61927","total_cup_points: 82.58<br />.pred: 81.30161","total_cup_points: 82.58<br />.pred: 82.14304","total_cup_points: 82.50<br />.pred: 82.62355","total_cup_points: 82.50<br />.pred: 81.49081","total_cup_points: 82.50<br />.pred: 83.06961","total_cup_points: 82.50<br />.pred: 83.30987","total_cup_points: 82.50<br />.pred: 80.41873","total_cup_points: 82.50<br />.pred: 82.23487","total_cup_points: 82.50<br />.pred: 82.69463","total_cup_points: 82.42<br />.pred: 84.14543","total_cup_points: 82.42<br />.pred: 81.16582","total_cup_points: 82.42<br />.pred: 80.45282","total_cup_points: 82.42<br />.pred: 82.00904","total_cup_points: 82.42<br />.pred: 80.81241","total_cup_points: 82.33<br />.pred: 82.77981","total_cup_points: 82.33<br />.pred: 83.50811","total_cup_points: 82.33<br />.pred: 82.92033","total_cup_points: 82.33<br />.pred: 81.01440","total_cup_points: 82.33<br />.pred: 79.81046","total_cup_points: 82.33<br />.pred: 83.34355","total_cup_points: 82.25<br />.pred: 83.53963","total_cup_points: 82.25<br />.pred: 81.92388","total_cup_points: 82.25<br />.pred: 81.72556","total_cup_points: 82.25<br />.pred: 81.00740","total_cup_points: 82.25<br />.pred: 83.54543","total_cup_points: 82.17<br />.pred: 83.15510","total_cup_points: 82.17<br />.pred: 80.52290","total_cup_points: 82.17<br />.pred: 83.23521","total_cup_points: 82.17<br />.pred: 82.24668","total_cup_points: 82.08<br />.pred: 82.58141","total_cup_points: 82.08<br />.pred: 84.67677","total_cup_points: 82.08<br />.pred: 82.25689","total_cup_points: 82.08<br />.pred: 80.24478","total_cup_points: 82.08<br />.pred: 82.66726","total_cup_points: 82.00<br />.pred: 82.08648","total_cup_points: 82.00<br />.pred: 82.28105","total_cup_points: 82.00<br />.pred: 80.54013","total_cup_points: 82.00<br />.pred: 83.06485","total_cup_points: 81.92<br />.pred: 82.43305","total_cup_points: 81.92<br />.pred: 80.81018","total_cup_points: 81.83<br />.pred: 83.27488","total_cup_points: 81.83<br />.pred: 82.67963","total_cup_points: 81.75<br />.pred: 82.10433","total_cup_points: 81.75<br />.pred: 82.65368","total_cup_points: 81.75<br />.pred: 81.22869","total_cup_points: 81.67<br />.pred: 83.29170","total_cup_points: 81.67<br />.pred: 82.46681","total_cup_points: 81.67<br />.pred: 83.32146","total_cup_points: 81.67<br />.pred: 82.18778","total_cup_points: 81.67<br />.pred: 83.20361","total_cup_points: 81.67<br />.pred: 81.09208","total_cup_points: 81.67<br />.pred: 81.93772","total_cup_points: 81.58<br />.pred: 82.44588","total_cup_points: 81.58<br />.pred: 82.19059","total_cup_points: 81.58<br />.pred: 81.95167","total_cup_points: 81.50<br />.pred: 81.40483","total_cup_points: 81.50<br />.pred: 82.18885","total_cup_points: 81.50<br />.pred: 82.78707","total_cup_points: 81.50<br />.pred: 81.58677","total_cup_points: 81.50<br />.pred: 81.08989","total_cup_points: 81.50<br />.pred: 79.52540","total_cup_points: 81.42<br />.pred: 82.03119","total_cup_points: 81.42<br />.pred: 81.90884","total_cup_points: 81.42<br />.pred: 82.14946","total_cup_points: 81.33<br />.pred: 81.30450","total_cup_points: 81.33<br />.pred: 80.40499","total_cup_points: 81.25<br />.pred: 81.56660","total_cup_points: 81.17<br />.pred: 81.97792","total_cup_points: 81.17<br />.pred: 82.60802","total_cup_points: 81.17<br />.pred: 82.18666","total_cup_points: 81.17<br />.pred: 80.81742","total_cup_points: 81.17<br />.pred: 80.70813","total_cup_points: 81.17<br />.pred: 83.06485","total_cup_points: 81.08<br />.pred: 81.18780","total_cup_points: 81.08<br />.pred: 81.01450","total_cup_points: 81.08<br />.pred: 81.71574","total_cup_points: 81.00<br />.pred: 82.31095","total_cup_points: 81.00<br />.pred: 82.55181","total_cup_points: 81.00<br />.pred: 82.11699","total_cup_points: 81.00<br />.pred: 82.06848","total_cup_points: 81.00<br />.pred: 82.16497","total_cup_points: 81.00<br />.pred: 82.43046","total_cup_points: 81.00<br />.pred: 80.89380","total_cup_points: 80.92<br />.pred: 81.31064","total_cup_points: 80.92<br />.pred: 81.39870","total_cup_points: 80.92<br />.pred: 81.38467","total_cup_points: 80.83<br />.pred: 82.46883","total_cup_points: 80.83<br />.pred: 81.17391","total_cup_points: 80.75<br />.pred: 82.50651","total_cup_points: 80.67<br />.pred: 81.31736","total_cup_points: 80.58<br />.pred: 81.88537","total_cup_points: 80.50<br />.pred: 81.72572","total_cup_points: 80.50<br />.pred: 82.11960","total_cup_points: 80.42<br />.pred: 82.35157","total_cup_points: 80.42<br />.pred: 83.71446","total_cup_points: 80.42<br />.pred: 80.11588","total_cup_points: 80.33<br />.pred: 82.04732","total_cup_points: 80.33<br />.pred: 81.68757","total_cup_points: 80.25<br />.pred: 81.39318","total_cup_points: 80.17<br />.pred: 82.75953","total_cup_points: 80.08<br />.pred: 82.30849","total_cup_points: 80.08<br />.pred: 81.70470","total_cup_points: 80.08<br />.pred: 81.33442","total_cup_points: 80.08<br />.pred: 81.33065","total_cup_points: 80.08<br />.pred: 79.58236","total_cup_points: 80.00<br />.pred: 81.37817","total_cup_points: 79.92<br />.pred: 81.74553","total_cup_points: 79.92<br />.pred: 82.08678","total_cup_points: 79.83<br />.pred: 82.91008","total_cup_points: 79.83<br />.pred: 81.71608","total_cup_points: 79.83<br />.pred: 81.49221","total_cup_points: 79.75<br />.pred: 81.16949","total_cup_points: 79.75<br />.pred: 82.55887","total_cup_points: 79.75<br />.pred: 81.38170","total_cup_points: 79.75<br />.pred: 81.49352","total_cup_points: 79.75<br />.pred: 80.26582","total_cup_points: 79.67<br />.pred: 80.48366","total_cup_points: 79.58<br />.pred: 79.05558","total_cup_points: 79.50<br />.pred: 81.04225","total_cup_points: 79.25<br />.pred: 81.40019","total_cup_points: 79.17<br />.pred: 82.25737","total_cup_points: 79.17<br />.pred: 81.16616","total_cup_points: 79.17<br />.pred: 81.77667","total_cup_points: 79.08<br />.pred: 78.33333","total_cup_points: 79.08<br />.pred: 82.22702","total_cup_points: 79.00<br />.pred: 81.75150","total_cup_points: 79.00<br />.pred: 81.26413","total_cup_points: 78.58<br />.pred: 81.75150","total_cup_points: 78.33<br />.pred: 81.54566","total_cup_points: 78.00<br />.pred: 78.69726","total_cup_points: 78.00<br />.pred: 80.46400","total_cup_points: 78.00<br />.pred: 81.34014","total_cup_points: 77.92<br />.pred: 81.03369","total_cup_points: 77.42<br />.pred: 78.19759","total_cup_points: 77.17<br />.pred: 80.38758","total_cup_points: 76.42<br />.pred: 80.11793","total_cup_points: 76.17<br />.pred: 81.80446","total_cup_points: 75.17<br />.pred: 78.91225","total_cup_points: 74.33<br />.pred: 80.20959","total_cup_points: 71.08<br />.pred: 79.80628","total_cup_points: 69.17<br />.pred: 80.05286","total_cup_points: 68.33<br />.pred: 79.93340"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(25,25,112,1)","opacity":0.5,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(25,25,112,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[67.334,89.246],"y":[67.334,89.246],"text":"intercept: 0<br />slope: 1","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(255,0,0,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":28.9514321295143,"r":7.97011207970112,"b":45.6288916562889,"l":40.6475716064757},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(85,85,85,1)","family":"","size":15.9402241594022},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[67.334,89.246],"tickmode":"array","ticktext":["70","75","80","85"],"tickvals":[70,75,80,85],"categoryorder":"array","categoryarray":["70","75","80","85"],"nticks":null,"ticks":"outside","tickcolor":"rgba(130,106,80,1)","ticklen":3.98505603985056,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(85,85,85,1)","family":"","size":12.7521793275218},"tickangle":-0,"showline":true,"linecolor":"rgba(130,106,80,1)","linewidth":0.66417600664176,"showgrid":true,"gridcolor":"rgba(238,228,218,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Actual Total Cupping Points","font":{"color":"rgba(85,85,85,1)","family":"","size":15.9402241594022}},"scaleanchor":"y","scaleratio":1,"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[67.334,89.246],"tickmode":"array","ticktext":["70","75","80","85"],"tickvals":[70,75,80,85],"categoryorder":"array","categoryarray":["70","75","80","85"],"nticks":null,"ticks":"outside","tickcolor":"rgba(130,106,80,1)","ticklen":3.98505603985056,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(85,85,85,1)","family":"","size":12.7521793275218},"tickangle":-0,"showline":true,"linecolor":"rgba(130,106,80,1)","linewidth":0.66417600664176,"showgrid":true,"gridcolor":"rgba(238,228,218,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Predicted Total Cupping Points","font":{"color":"rgba(85,85,85,1)","family":"","size":15.9402241594022}},"scaleanchor":"x","scaleratio":1,"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"rgba(255,255,255,1)","borderwidth":1.88976377952756,"font":{"color":"rgba(85,85,85,1)","family":"","size":12.7521793275218}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"438e3b8f7414":{"x":{},"y":{},"type":"scatter"},"438e470deb98":{"intercept":{},"slope":{}}},"cur_data":"438e3b8f7414","visdat":{"438e3b8f7414":["function (y) ","x"],"438e470deb98":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<p>The predictions were quite off for those with actual scores below 80, and the model tend to over-estimate the cupping scores.</p>
<h2 id="variable-importance">Variable Importance</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>finalized_model</span> <span class='op'>&lt;-</span> 
  <span class='va'>best_workflow_rf</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>fit</span><span class='op'>(</span><span class='va'>coffee_cleaned</span><span class='op'>)</span>


<span class='va'>feat_imp_model</span> <span class='op'>&lt;-</span> 
  <span class='va'>RF</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>finalize_model</span><span class='op'>(</span><span class='fu'>select_best</span><span class='op'>(</span><span class='va'>tuned_rf</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>set_engine</span><span class='op'>(</span><span class='st'>"ranger"</span>,
             importance <span class='op'>=</span> <span class='st'>"permutation"</span><span class='op'>)</span>


<span class='va'>feature_importance</span> <span class='op'>&lt;-</span> 
  <span class='fu'>workflow</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>add_recipe</span><span class='op'>(</span><span class='va'>recipe_rf</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>add_model</span><span class='op'>(</span><span class='va'>feat_imp_model</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>fit</span><span class='op'>(</span><span class='va'>coffee_train</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>extract_fit_parsnip</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>vip</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>feature_importance</span>
</code></pre>
</div>
<p><img src="Predict-coffee-cupping-score_files/figure-html5/unnamed-chunk-25-1.png" width="624" /></p>
</div>
<h1 id="references">References:</h1>
<ul>
<li><a href="https://tdunn.ca/posts/2020-07-12-tidytuesday-2020-week-28/" class="uri">https://tdunn.ca/posts/2020-07-12-tidytuesday-2020-week-28/</a></li>
</ul>
<div class="sourceCode" id="cb30"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<div class="article-footer">
  <p class="social_footer">
    <span class="disqus-comments">
      <i class="fas fa-comments"></i>
      &nbsp;
      <span class="disqus-comment-count" data-disqus-identifier="posts/20220625 - Predict coffee cupping score/">Comment on this article</span>
    </span>
    <span class="article-sharing">
      Share: &nbsp;
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Flruolin.github.io%2FmyBlog%2Fposts%2F20220625%20-%20Predict%20coffee%20cupping%20score%2F&amp;title=Predicting%20coffee%20cupping%20scores" aria-label="share on linkedin">
        <i class="fab fa-linkedin" aria-hidden="true"></i>
      </a>
    </span>
  </p>
  <script id="dsq-count-scr" src="https://https-lruolin-github-io-myblog-2.disqus.com/count.js" async></script>
  <div id="disqus_thread" class="hidden"></div>
  <script type="text/javascript" cookie-consent="functionality">
var disqus_config = function () {
  this.page.url = 'https://lruolin.github.io/myBlog/posts/20220625 - Predict coffee cupping score/';
  this.page.identifier = 'posts/20220625 - Predict coffee cupping score/';
};
(function() {
  var d = document, s = d.createElement('script');
  s.src = 'https://https-lruolin-github-io-myblog-2.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script>
</div>
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">lruolin (2022, June 25). pRactice corner: Predicting coffee cupping scores. Retrieved from https://lruolin.github.io/myBlog/posts/20220625 - Predict coffee cupping score/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{lruolin2022predicting,
  author = {lruolin, },
  title = {pRactice corner: Predicting coffee cupping scores},
  url = {https://lruolin.github.io/myBlog/posts/20220625 - Predict coffee cupping score/},
  year = {2022}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
